if (self.CavalryLogger) { CavalryLogger.start_js(["E523z"]); }

__d("ServerHTML.react",["React"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.blob;a=babelHelpers.objectWithoutProperties(a,["blob"]);return typeof c==="string"?b("React").createElement("div",a,c):b("React").createElement("div",babelHelpers["extends"]({},a,{dangerouslySetInnerHTML:c}))};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("PopoverAsyncMenu.react",["cx","CSS","InlineBlock.react","MenuTheme","Popover","PopoverAsyncMenu","PopoverLoadingMenu","PopoverMenu.react","React","ReactDOM","URI","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.getPopoverMenu=function(){return this.$2}.bind(this),this.$3=function(){var a=b("ReactDOM").findDOMNode(this.refs.root);a=a.firstChild;return new(b("PopoverAsyncMenu"))(this.$1,a,this.props.loadingMenu,this.props.endpoint,this.props.behaviors,this.props.endpointData)}.bind(this),this.getMenu=function(){return this.$2.getMenu()}.bind(this),this.showPopover=function(a){this.$1.showLayer();if(a){var b=this.$2.getMenu();b.blur();b.focusAnItem(a)}}.bind(this),this.hidePopover=function(){var a=this.$1;a&&a.isShown()&&a.hideLayer()}.bind(this),this.getFocusedItem=function(){var a=this.$2.getMenu();return a.getFocusedItem()}.bind(this),c}a.prototype.componentDidMount=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.root),c=a.firstChild;b("CSS").addClass(c,"_p");this.$1=new(b("Popover"))(a,c,this.props.layerBehaviors,{alignh:this.props.alignh,position:this.props.position,disabled:this.props.disabled});this.props.onShow&&this.$1.subscribe("show",this.props.onShow);this.props.onHide&&this.$1.subscribe("hide",this.props.onHide);this.$2=this.$3()};a.prototype.componentDidUpdate=function(a){"use strict";this.props.alignh!==a.alignh&&this.$2.getPopover().getLayer().setAlignment(this.props.alignh),this.props.disabled!==a.disabled&&(this.props.disabled?this.$2.disable():this.$2.enable()),this.props.endpoint.toString()!==a.endpoint.toString()&&(this.hidePopover(),this.$2=this.$3())};a.prototype.render=function(){"use strict";var a=b("React").Children.map(this.props.children,function(a,c){if(c===0)return b("React").cloneElement(a,{className:b("joinClasses")(a.props.className,"_p")});else return a});return b("React").createElement(b("InlineBlock.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"uiPopover"),ref:"root",disabled:null}),a)};a.prototype.componentWillUnmount=function(){"use strict";this.hidePopover()};a.getButtonSize=b("PopoverMenu.react").getButtonSize;a.propTypes={alignh:c.oneOf(["left","center","right"]),alignv:c.oneOf(["baseline","bottom","middle","top"]),position:c.oneOf(["above","below","left","right"]),layerBehaviors:c.array,loadingMenu:c.instanceOf(b("PopoverLoadingMenu")),disabled:c.bool,endpoint:c.oneOfType([c.string.isRequired,c.instanceOf(b("URI")).isRequired]),endpointData:c.object,onShow:c.func,onHide:c.func};a.defaultProps={alignv:"middle",loadingMenu:new(b("PopoverLoadingMenu"))({theme:b("MenuTheme")})};e.exports=a}),null);
__d("RoundImage.react",["cx","React","joinClasses","Image.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(i,b("React").Component);h&&h.prototype;i.prototype.render=function(){var a=b("joinClasses")(this.props.className,i.baseClassName);return b("React").createElement(b("Image.react"),babelHelpers["extends"]({},this.props,{className:a}))};function i(){h.apply(this,arguments)}i.baseClassName="_2qgu";e.exports=i}),null);
__d("FeedObjectCapstone",["csx","DOM","Parent","ge"],(function(a,b,c,d,e,f,g){__p&&__p();var h={getCapstone:function(a){var c=b("DOM").scry(a,"._x1g");c.length||(c=b("DOM").scry(a.parentNode,"._x1g"));return c?c[0]:null},addCapstoneByStoryID:function(a,c){a=b("Parent").bySelector(b("ge")(a),"._5jmm");this.addCapstone(a,c)},addCapstone:function(a,c){var d=b("DOM").find(a,"._5v3q");d&&(a=d);this.removeCapstone(a);c&&b("DOM").prependContent(a,c);return c},removeCapstone:function(a){a=h.getCapstone(a);a&&b("DOM").remove(a)}};e.exports=h}),null);
__d("EntstreamFeedObjectFollowup",["csx","cx","Arbiter","CSS","DOM","EntstreamFeedObject","Event","FeedObjectCapstone","ge"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="EntstreamFeedObjectFollowup/removed",j={getFollowup:function(a){var c=b("DOM").scry(a,"._5lum");c.length||(c=b("DOM").scry(a.parentNode,"._5lum"));return c?c[0]:null},initCloseButton:function(a){var c=b("DOM").scry(a,"._5xsl");if(c.length==0)return;var d=b("Event").listen(c[0],"click",function(){d.remove(),b("DOM").remove(a),b("Arbiter").inform(i,a)});a.listener=d},stopListenCloseButton:function(a){a.listener&&a.listener.remove()},addFollowup:function(a,c,d){__p&&__p();var e=b("CSS").matchesSelector(a,"._5pat"),f=b("DOM").create("div",{className:"_5lum"});e?b("CSS").addClass(f,"_5pau"):b("CSS").addClass(f,"_1f84");if(d)if(typeof d==="string")b("CSS").addClass(f,d);else if(d instanceof Array)for(var e=0;e<d.length;e++)b("CSS").addClass(f,d[e]);d=b("DOM").scry(a,"._5v3q")[0];d&&(a=d);e=j.getFollowup(a);e&&this.removeFollowup(e);b("FeedObjectCapstone").removeCapstone(a);c?(b("DOM").appendContent(f,c),this.initCloseButton(f),b("CSS").matchesSelector(f,"._4-u3")?b("DOM").prependContent(a,f):b("DOM").insertBefore(a,f)):b("DOM").prependContent(a,f);return f},removeFollowup:function(a){a=j.getFollowup(a);this.stopListenCloseButton(a);b("DOM").remove(a);b("Arbiter").inform(i,a)},appendToFollowup:function(a,c){a=b("EntstreamFeedObject").getRoot(b("ge")(a));a=j.getFollowup(a);b("DOM").appendContent(a,c)},addInstreamAdsFollowup:function(a){a=b("DOM").scry(a,"._211q");var c=b("DOM").create("div",{className:"_5lum"});b("DOM").prependContent(a[0],c);return c}};e.exports=j}),null);
__d("CommercialBreakCallToActionAttachment.react",["cx","React","TrackingNodes","XUIText.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";if(!this.props.link||!this.props.linkCaption&&!this.props.linkTitle)return null;var a=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.INSTREAM_CALL_TO_ACTION_ATTACHMENT);return b("React").createElement("div",{className:"_1y4d","data-ft":a},b("React").createElement(b("XUIText.react"),{className:"_1y4e"},this.props.linkTitle),b("React").createElement(b("XUIText.react"),{className:"_1y4g",style:{paddingTop:this.props.linkTitle?"12px":"0px",display:this.props.linkCaption?"inherit":"none"}},this.props.linkCaption),b("React").createElement("a",{className:"_275_",href:this.props.link,target:"_blank",onClick:this.props.onClick}))};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("CallToActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_LINK:"OPEN_LINK",LIKE_PAGE:"LIKE_PAGE",SHOP_NOW:"SHOP_NOW",PLAY_GAME:"PLAY_GAME",INSTALL_APP:"INSTALL_APP",USE_APP:"USE_APP",CALL:"CALL",CALL_ME:"CALL_ME",GET_MOBILE_APP:"GET_MOBILE_APP",INSTALL_MOBILE_APP:"INSTALL_MOBILE_APP",INSTALL_FREE_MOBILE_APP:"INSTALL_FREE_MOBILE_APP",USE_MOBILE_APP:"USE_MOBILE_APP",MOBILE_DOWNLOAD:"MOBILE_DOWNLOAD",BOOK_TRAVEL:"BOOK_TRAVEL",LISTEN_MUSIC:"LISTEN_MUSIC",WATCH_VIDEO:"WATCH_VIDEO",LEARN_MORE:"LEARN_MORE",SIGN_UP:"SIGN_UP",DOWNLOAD:"DOWNLOAD",WATCH_MORE:"WATCH_MORE",NO_BUTTON:"NO_BUTTON",VISIT_PAGES_FEED:"VISIT_PAGES_FEED",MISSED_CALL:"MISSED_CALL",CALL_NOW:"CALL_NOW",APPLY_NOW:"APPLY_NOW",BUY_NOW:"BUY_NOW",GET_OFFER:"GET_OFFER",GET_OFFER_VIEW:"GET_OFFER_VIEW",BUY_TICKETS:"BUY_TICKETS",UPDATE_APP:"UPDATE_APP",GET_DIRECTIONS:"GET_DIRECTIONS",BUY:"BUY",SEE_DETAILS:"SEE_DETAILS",MESSAGE_PAGE:"MESSAGE_PAGE",MESSAGE_USER:"MESSAGE_USER",DONATE:"DONATE",SUBSCRIBE:"SUBSCRIBE",SAY_THANKS:"SAY_THANKS",SELL_NOW:"SELL_NOW",SHARE:"SHARE",DONATE_NOW:"DONATE_NOW",GET_QUOTE:"GET_QUOTE",CONTACT_US:"CONTACT_US",ORDER_NOW:"ORDER_NOW",START_ORDER:"START_ORDER",ADD_TO_CART:"ADD_TO_CART",VIDEO_ANNOTATION:"VIDEO_ANNOTATION",MOMENTS:"MOMENTS",RECORD_NOW:"RECORD_NOW",VOTE_NOW:"VOTE_NOW",GIVE_FREE_RIDES:"GIVE_FREE_RIDES",REGISTER_NOW:"REGISTER_NOW",OPEN_MESSENGER_EXT:"OPEN_MESSENGER_EXT",CIVIC_ACTION:"CIVIC_ACTION",SEND_INVITES:"SEND_INVITES",SAVE:"SAVE",REQUEST_TIME:"REQUEST_TIME",SEE_MENU:"SEE_MENU",EMAIL_NOW:"EMAIL_NOW",PAY_OR_REQUEST:"PAY_OR_REQUEST",SEARCH:"SEARCH",GET_SHOWTIMES:"GET_SHOWTIMES",TRY_IT:"TRY_IT",LISTEN_NOW:"LISTEN_NOW",TRY_ON:"TRY_ON",UNLIKE_PAGE:"UNLIKE_PAGE",BET_NOW:"BET_NOW",OPEN_MOVIES:"OPEN_MOVIES",EVENT_RSVP:"EVENT_RSVP",GO_LIVE:"GO_LIVE",SEND_TIP:"SEND_TIP",WHATSAPP_MESSAGE:"WHATSAPP_MESSAGE",GET_EVENT_TICKETS:"GET_EVENT_TICKETS",VIEW_INSTAGRAM_PROFILE:"VIEW_INSTAGRAM_PROFILE",FOLLOW_NEWS_STORYLINE:"FOLLOW_NEWS_STORYLINE"})}),null);
__d("CommercialBreakCallToActionLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTEXT_CARD:"context_card",INLINE:"inline"})}),null);
__d("CommercialBreakCallToActionButton.react",["cx","CallToActionTypes","CommercialBreakCallToActionLocation","React","SUIButton.react","TrackingNodes","SUIBusinessTheme","ServerHTML.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";if(this.props.callToActionType===b("CallToActionTypes").NO_BUTTON)return null;var a=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.INSTREAM_CALL_TO_ACTION_BUTTON);switch(this.props.buttonLocation){case b("CommercialBreakCallToActionLocation").INLINE:return b("React").createElement("a",{onClick:this.props.onClick,href:this.props.link,"data-ft":a,target:"_blank"},b("React").createElement(b("ServerHTML.react"),{blob:this.props.callToActionText,className:"_44mp"}));case b("CommercialBreakCallToActionLocation").CONTEXT_CARD:return b("React").createElement(b("SUIButton.react"),{label:b("React").createElement(b("ServerHTML.react"),{blob:this.props.callToActionText}),href:{url:this.props.link},target:"_blank","data-ft":a,theme:b("SUIBusinessTheme"),onClick:this.props.onClick});default:return null}};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("AdBreakClickSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_TO_ACTION_BUTTON:"CALL_TO_ACTION_BUTTON",CALL_TO_ACTION_BUTTON_ON_VIDEO:"CALL_TO_ACTION_BUTTON_ON_VIDEO",SPONSOR_CONTEXT_CARD:"SPONSOR_CONTEXT_CARD",LINK_CONTEXT_CARD:"LINK_CONTEXT_CARD",PROFILE:"PROFILE"})}),null);
__d("CommercialBreakMobileEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUBSCRIPTION_SUCCESS:"commercial_break_skywalker_subscription_success",SUBSCRIPTION_FAILURE:"commercial_break_skywalker_subscription_failure",RECEIVE_INTENT_MSG:"commercial_break_skywalker_receive_intent",RECEIVE_START_MSG:"commercial_break_skywalker_receive_start",RECEIVE_INVALID_MSG:"commercial_break_skywalker_receive_invalid_message",VIDEO_FETCH_SUCCESS:"commercial_break_video_fetch_success",VIDEO_FETCH_FAILURE:"commercial_break_video_fetch_failure",COMMERCIAL_BREAK_INLINE_TO_FULLSCREEN:"commercial_break_inline_to_fullscreen",COMMERCIAL_BREAK_FULLSCREEN_TO_INLINE:"commercial_break_fullscreen_to_inline",COMMERCIAL_BREAK_SCROLLED_AWAY:"commercial_break_scrolled_away",COMMERCIAL_BREAK_SCROLLED_INTO:"commercial_break_scrolled_into",COMMERCIAL_BREAK_START_NFX:"commercial_break_start_nfx",COMMERCIAL_BREAK_HIDE_AD:"commercial_break_hide_ad",COMMERCIAL_BREAK_HIDE_AD_BREAKS:"commercial_break_hide_ad_breaks",COMMERCIAL_BREAK_START:"commercial_break_start",COMMERCIAL_BREAK_START_AD:"commercial_break_start_ad",COMMERCIAL_BREAK_TRANSIT:"commercial_break_transit",COMMERCIAL_BREAK_WAIT_FOR:"commercial_break_wait_for",COMMERCIAL_BREAK_STATIC_COUNTDOWN:"commercial_break_static_countdown",COMMERCIAL_BREAK_END:"commercial_break_end",COMMERCIAL_BREAK_PAUSE_AD:"commercial_break_pause_ad",COMMERCIAL_BREAK_PLAY_AD:"commercial_break_play_ad",COMMERCIAL_BREAK_NO_AD_TRANSITION:"commercial_break_no_ad_transition",COMMERCIAL_BREAK_ELIGIBLE_VOD_START:"commercial_break_eligible_vod_start",COMMERCIAL_BREAK_START_SHOW_NOTHING:"commercial_break_start_show_nothing",COMMERCIAL_BREAK_STARTING_INDICATOR:"commercial_break_starting_indicator",COMMERCIAL_BREAK_START_TIME_DELTA:"commercial_break_start_time_delta",COMMERCIAL_BREAK_IMPRESSION_ATTEMPT:"commercial_break_impression_attempt",COMMERCIAL_BREAK_SKYWALKER_RECEIVED_DUPLICATE_EVENT:"commercial_break_skywalker_received_duplicate_event",COMMERCIAL_BREAK_ADS_LOADED:"commercial_break_ads_loaded",COMMERCIAL_BREAK_FIRE_EVENT_IN_TRACKER:"commercial_break_fire_event_in_tracker",COMMERCIAL_BREAK_LOG_IMPRESSION_IN_TRACKER:"commercial_break_log_impression_in_tracker",COMMERCIAL_BREAK_REGISTER_VIDEO:"commercial_break_register_video",COMMERCIAL_BREAK_RESUME_HOST_VIDEO:"commercial_break_resume_host_video",COMMERCIAL_BREAK_CLICK_ON_STARTING_INDICATOR:"commercial_break_click_on_starting_indicator",COMMERCIAL_BREAK_PLUGIN_IS_ON_DIFFERENT_HOSTVIDEO:"commercial_break_plugin_is_on_different_hostvideo",COMMERCIAL_BREAK_LOG_AD_IMPRESSION:"commercial_break_log_ad_impression",COMMERCIAL_BREAK_CLICK:"commercial_break_click",COMMERCIAL_BREAK_SCRUB_THROUGH:"commercial_break_scrub_through",COMMERCIAL_BREAK_SCRUBBER_LEAVE_BEFORE_AD_BREAK:"commercial_break_scrubber_leave_before_ad_break",COMMERCIAL_BREAK_SCRUBBER_LEAVE_DURING_AD_BREAK:"commercial_break_scrubber_leave_during_ad_break",COMMERCIAL_BREAK_CONTEXT_CARD_INFO_BUTTON_CLICK:"commercial_break_context_card_info_button_click",COMMERCIAL_BREAK_TAP_ON_TRAILER:"commercial_break_tap_on_trailer",COMMERCIAL_BREAK_PRE_ROLL_FETCH_SUCCESS_LATE:"commercial_break_pre_roll_fetch_success_late",COMMERCIAL_BREAK_PRE_ROLL_START:"commercial_break_pre_roll_start",COMMERCIAL_BREAK_PRE_ROLL_BLOCKED_BY_RESUME_TIME:"commercial_break_pre_roll_blocked_by_resume_time",COMMERCIAL_BREAK_PRE_ROLL_BLOCKED_BY_REMAINING_TIME:"commercial_break_pre_roll_blocked_by_remaining_time",COMMERCIAL_BREAK_CLICK_ON_SOUND_TOGGLE:"commercial_break_click_on_sound_toggle"})}),null);
__d("CommercialBreakContextCard.react",["ix","cx","fbt","AdBreakClickSource","AsyncRequest","CenteredContainer.react","CommercialBreakCallToActionAttachment.react","CommercialBreakCallToActionButton.react","CommercialBreakCallToActionLocation","CommercialBreakMobileEvent","CommercialBreakUtil","Image.react","LayerFadeOnHide","PopoverAsyncMenu.react","React","RoundImage.react","VideoPlayerLoggerSource","XBasicFBNuxDismissController","XBasicFBNuxViewController","XUIAmbientNUX.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","XUIText.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){"use strict";j.constructor.call(this),this.state={inforCardShown:!1,infoCardNuxShown:!1},this.$15=function(){if(this.props.infoCardNuxID){var a=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",this.props.infoCardNuxID).getURI();new(b("AsyncRequest"))().setURI(a).send()}this.setState({infoCardNuxShown:!1})}.bind(this),this.$1=null,this.$2=null,this.$3=!1}a.prototype.componentDidMount=function(){"use strict";this.$2||(this.$2=this.props.hostVPC.addListener("commercialBreak/showUFI",this.$4.bind(this))),this.props.infoCardNuxID&&!this.state.infoCardNuxShown&&this.setState({infoCardNuxShown:!0})};a.prototype.componentWillUnmount=function(){"use strict";this.$2&&this.$2.remove(),this.$2=null};a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_36l3"},this.$5(),this.$6())};a.prototype.$5=function(){"use strict";return this.props.callToAction&&this.props.config.isDREnabled&&this.props.config.sponsorLocation!==b("CommercialBreakCallToActionLocation").CONTEXT_CARD?null:b("React").createElement("div",{className:"_1y8j"},b("React").createElement("div",{className:"_1y8k"},b("React").createElement("a",{href:this.props.profileLink,target:"_blank",onClick:this.$7.bind(this)},b("React").createElement(b("Image.react"),{style:{display:"block"},height:"40",width:"40",src:this.props.profilePicURI}))),b("React").createElement("div",{className:"_1y8n"},b("React").createElement("div",{className:"_1y8v"},b("React").createElement("div",{className:"_1y8w"},b("React").createElement("a",{href:this.props.profileLink,target:"_blank",onClick:this.$7.bind(this)},this.props.profileName)),b("React").createElement("div",{className:"_1y8x"},i._("Sponsored")))),b("React").createElement("div",{className:"_2n2q"},this.$8(),this.$9(),this.$10()))};a.prototype.$9=function(){"use strict";if(!this.props.hostVideoOwnerPageProfileName||!this.props.hostVideoOwnerPageProfileImageURI)return null;return this.props.hostVPC.getSource()===b("VideoPlayerLoggerSource").TAHOE||this.props.config.isDREnabled&&this.props.callToAction&&this.props.config.ctaButtonLocation===b("CommercialBreakCallToActionLocation").CONTEXT_CARD?null:b("React").createElement("div",{className:"_1z7o",role:"presentation",onClick:this.$11.bind(this),ref:"infoButton"},this.$12(),this.$13(),b("React").createElement(b("Image.react"),{src:g("124739")}))};a.prototype.$11=function(){"use strict";this.setState({inforCardShown:!0,infoCardNuxShown:!1}),b("CommercialBreakUtil").logMarauderEvent(this.props.hostVPC,b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_CONTEXT_CARD_INFO_BUTTON_CLICK)};a.prototype.$7=function(){"use strict";b("CommercialBreakUtil").logMarauderEvent(this.props.hostVPC,b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_CLICK,{ad_break_click_source:b("AdBreakClickSource").PROFILE})};a.prototype.$14=function(){"use strict";this.setState({inforCardShown:!1})};a.prototype.$12=function(){"use strict";return b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},isStrictlyControlled:!0,shown:this.state.inforCardShown,onHide:this.$14.bind(this),width:400},b("React").createElement(b("XUIDialogTitle.react"),null,b("React").createElement(b("XUIText.react"),{weight:"bold"},i._("Why You're Seeing Ads in Videos"))),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement(b("CenteredContainer.react"),null,b("React").createElement("div",{className:"_1z7p"},b("React").createElement(b("RoundImage.react"),{src:this.props.hostVideoOwnerPageProfileImageURI,width:56,height:56})),b("React").createElement("div",{className:"_1z7q"},i._("{profile_name} paused their video for an ad break. Ad breaks are a way for video creators to earn money on Facebook.",[i._param("profile_name",b("React").createElement("strong",null,this.props.hostVideoOwnerPageProfileName))])))),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})))};a.prototype.$13=function(){"use strict";__p&&__p();if(!this.props.infoCardNuxID)return null;if(this.state.infoCardNuxShown&&!this.$3){var a=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",this.props.infoCardNuxID).getURI();new(b("AsyncRequest"))().setURI(a).send();this.$3=!0}return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.infoButton}.bind(this),shown:this.state.infoCardNuxShown,position:"below",width:"auto",alignment:"right",onCloseButtonClick:this.$15},i._("About ads in videos"))};a.prototype.$10=function(){"use strict";if(!this.props.chevronButtonID||!this.props.instreamVideoOptionMenuURI)return null;return this.props.hostVPC.getSource()===b("VideoPlayerLoggerSource").TAHOE||this.props.config.isDREnabled&&this.props.callToAction&&this.props.config.ctaButtonLocation===b("CommercialBreakCallToActionLocation").CONTEXT_CARD?null:b("React").createElement("div",{className:"_1cx5"},b("React").createElement(b("PopoverAsyncMenu.react"),{alignh:"center",alignv:"bottom",position:"above",endpoint:this.props.instreamVideoOptionMenuURI,id:this.props.chevronButtonID,layerBehaviors:[],ref:function(a){this.$1=a}.bind(this)},b("React").createElement(b("Image.react"),{src:g("123796")})))};a.prototype.$8=function(){"use strict";var a=this.props.callToAction;return!this.props.config.isDREnabled||!a||this.props.config.ctaButtonLocation!==b("CommercialBreakCallToActionLocation").CONTEXT_CARD?null:b("React").createElement("div",{className:"_11_p"},b("React").createElement(b("CommercialBreakCallToActionButton.react"),{buttonLocation:this.props.config.ctaButtonLocation,callToActionType:a.ctaType,callToActionText:a.ctaFbt,link:a.link,onClick:this.$16.bind(this)}))};a.prototype.$16=function(){"use strict";b("CommercialBreakUtil").logMarauderEvent(this.props.hostVPC,b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_CLICK,{ad_break_click_source:b("AdBreakClickSource").CALL_TO_ACTION_BUTTON}),this.props.hostVPC.emit("commercialBreak/CTAClicked")};a.prototype.$6=function(){"use strict";var a=this.props.callToAction;return!this.props.config.isDREnabled||!a?null:b("React").createElement(b("CommercialBreakCallToActionAttachment.react"),{link:a.link,linkTitle:a.linkTitle,linkCaption:a.linkCaption,onClick:this.$17.bind(this)})};a.prototype.$17=function(){"use strict";b("CommercialBreakUtil").logMarauderEvent(this.props.hostVPC,b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_CLICK,{ad_break_click_source:b("AdBreakClickSource").SPONSOR_CONTEXT_CARD}),this.props.hostVPC.emit("commercialBreak/CTAClicked")};a.prototype.$4=function(){"use strict";this.$1&&this.$1.hidePopover()};e.exports=a}),null);
__d("CommercialBreakUtil",["csx","CommercialBreakContextCard.react","CommercialBreakExperiments","DataStore","DOM","React","ReactDOM","VideoPlayerFormats","VideoPlayerFormatsMap"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();e.exports={renderContextCard:function(a,c){__p&&__p();if(c===null)return;var d=a.getOption("VideoWithInstreamVideo","controller"),e=a.getOption("VideoWithCommercialBreak","controller"),f=d&&d.getAdController();d=d&&d.getConfig();if(d&&!d.isBroadcast&&f){var g=JSON.parse(b("DataStore").get(f.getRootNode(),"store"));if(g&&Object.prototype.hasOwnProperty.call(g,"profileName")&&Object.prototype.hasOwnProperty.call(g,"profilePicURI")&&Object.prototype.hasOwnProperty.call(g,"profileLink")){var h=null,i=e&&e.getContextCardTrackingWrapper();if(i){i=b("DOM").setContent(c,i);i.length!=0&&(h=i[0])}i=e&&e.getCallToAction();var j=i&&i.adVideoID&&i.adVideoID.toString();f.getVideoID()!==j&&(i=null);f=null;j=null;var k=null,l=null,m=null;b("CommercialBreakExperiments").instreamAdsNFXOnContextCard&&(f=e&&e.getChevronButtonID(),j=e&&e.getInstreamVideoOptionMenuURI());b("CommercialBreakExperiments").instreamAdsInfoCard&&(k=d&&d.hostVideoOwnerPageProfileName,l=d&&d.hostVideoOwnerPageProfileImageURI,m=e&&e.getInfoCardNuxID());b("ReactDOM").render(b("React").createElement(b("CommercialBreakContextCard.react"),{callToAction:i,config:d,hostVPC:a,profileName:g.profileName,profilePicURI:g.profilePicURI,profileLink:g.profileLink,chevronButtonID:f,instreamVideoOptionMenuURI:j,hostVideoOwnerPageProfileName:k,hostVideoOwnerPageProfileImageURI:l,infoCardNuxID:m}),h?h:c)}}},removeContextCard:function(a){if(!a)return;var c=b("DOM").find(a,"._36l3");c&&b("ReactDOM").unmountComponentAtNode(c.parentNode);b("DOM").remove(a)},logMarauderEvent:function(a,b){var c=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],d=a.getOption("VideoWithInstreamVideo","controller");d&&d.logMarauderEvent(b,c)},getVideoPlayerFormat:function(a){if(a.isFullscreen())return b("VideoPlayerFormats").FULL_SCREEN;a=a.getSource();return a?b("VideoPlayerFormatsMap")[a]:b("VideoPlayerFormats").INLINE},getVideoPlayerSubOrigin:function(a){return a.getPlayerSuborigin()||a.getSource()}}}),null);
__d("CommercialBreakHostStoryComponentType",[],(function(a,b,c,d,e,f){a=Object.freeze({POP_OVER_MENU:"POP_OVER_MENU",HOST_STORY_HEADER:"HOST_STORY_HEADER"});e.exports=a}),null);
__d("CommercialBreakNoAdReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NO_VIDEO_AD:"no_video_ad",TIME_SPENT_INSUFFICIENT:"time_spent_insufficient",PLAYBACK_ERROR:"playback_error",HIDE_AD:"hide_ad",WAIT_FOR_FAILED:"wait_for_failed",SPONSORED_STORY:"sponsored_story",CONTROL_GROUP:"control_group",DUPLICATE_VIDEO:"duplicate_video",INACTIVE_TAB:"inactive_tab",IS_COMMENTING:"is_commenting",SCRUBBER_FETCH_INCOMPLETE:"scrubber_fetch_incomplete",VIDEO_AD_IN_NI:"video_ad_in_ni"})}),null);
__d("CommercialBreakState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INIT:"INIT",PREPARE:"PREPARE",AD_REQUEST_SENT:"AD_REQUEST_SENT",CB_SCHEDULED:"CB_SCHEDULED",ENTERING_TRANSITION:"ENTERING_TRANSITION",PLAY_AD:"PLAY_AD",LEAVING_TRANSITION:"LEAVING_TRANSITION"})}),null);
__d("InstreamVideoAdType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIVE:"live",VOD:"vod",NONLIVE:"nonlive",LIVE_POST_ROLL:"live_post_roll",VOD_POST_ROLL:"vod_post_roll",NONLIVE_POST_ROLL:"nonlive_post_roll",LIVE_AD_PODS:"live_ad_pods",NONLIVE_PRE_ROLL:"nonlive_pre_roll"})}),null);
__d("InstreamVideoAdsController",["CommercialBreakMobileEvent","DataAttributeUtils","DateConsts","DOMQuery","MarauderLogger","NonBlockingIFrame","URI","VideoPlayerStates","ViewableImpressionConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=null;function h(){"use strict";this.$1=new Map()}h.prototype.$2=function(a){"use strict";var c=[];this.$1.forEach(function(d,e){!e.isState(b("VideoPlayerStates").DESTROYED)&&b("DOMQuery").contains(a,e.getRootNode())&&c.push(e)});return c.length===0?null:c[0]};h.prototype.$3=function(a,b){"use strict";if(this.$1.has(a))return;this.$1.set(a,b)};h.registerVideoController=function(a,c){"use strict";g===null&&(g=new h());g.$3(a,c);b("MarauderLogger").log(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_REGISTER_VIDEO,"commercial_break",{commercial_break_ad_client_token:a.getAdClientToken()});var d=g;a.once("beginPlayback",function(){d.$4(a)})};h.prototype.$4=function(a){"use strict";var c=this.$1.get(a);if(b("DOMQuery").contains(c,a.getRootNode())){a=b("DataAttributeUtils").getDataAttribute(c,"data-xt");c=Math.floor(Date.now()/b("DateConsts").MS_PER_SEC);a={xt:a,isv:1,cts:c};b("NonBlockingIFrame").loadIFrame(new(b("URI"))(b("ViewableImpressionConfig").impressionURL).addQueryData(a).toString())}};h.findVideoControllerForStory=function(a){"use strict";return g===null?null:g.$2(a)};e.exports=h}),null);
__d("CommercialBreakVideoAdOverlay",["cx","Arbiter","Bootloader","CommercialBreakMobileEvent","CommercialBreakNoAdReason","CommercialBreakState","CSS","DOM","DOMDimensions","Event","InstreamVideoAdsController","InstreamVideoAdType","SubscriptionsHandler","VideoPlayerLoggerEvent","VideoPlayerLoggerEventField","VideoPlayerReason","VideoPlayerStates","getFullScreenElement","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$7=a.root,this.$9=!1,this.$4=null,this.$10=!1,this.$11=!1,this.$12=0,this.$14=!1}a.prototype.enable=function(a){"use strict";this.$1=a,this.$6=a.addListener("optionsChange",function(){return this.$15()}.bind(this)),this.$15()};a.prototype.disable=function(){"use strict";this.$6.remove()};a.prototype.stopAdWithoutTransition=function(){"use strict";this.$16(),this.$3&&this.$3.reset()};a.prototype.$15=function(){"use strict";__p&&__p();this.$2=this.$1.getOption("VideoWithInstreamVideo","controller");if(!this.$2)return;this.$3=this.$1.getOption("VideoWithCommercialBreak","controller");if(!this.$3)return;this.$6.remove();this.$8=this.$2.getConfig();this.$1.addListener("commercialBreak/vodBreakStarting",function(){this.$17()}.bind(this));this.$3.addListener("commercialBreak/videoAdStoryFetched",function(a,c,d,e,f){a&&(b("DOM").setContent(this.$7,a),this.$10=!0,this.$11=!c,this.$12=d,this.$2.setCurrentInstreamVideoAdBreakVideoID(e),this.$2.setCurrentInstreamVideoAdBreakClientToken(f))}.bind(this));this.$3.addListener("commercialBreak/stateChange",function(a){__p&&__p();a=a.state;switch(a){case b("CommercialBreakState").AD_REQUEST_SENT:case b("CommercialBreakState").ENTERING_TRANSITION:a=this.$18();!!a.height&&!!a.width&&(this.$13=a);break;case b("CommercialBreakState").PLAY_AD:this.$19();break;case b("CommercialBreakState").INIT:this.$16();break;case b("CommercialBreakState").LEAVING_TRANSITION:this.$8.isBroadcast&&this.$16();break}}.bind(this));this.$3.addListener("commercialBreak/inTransition",function(a){return this.$20(a.shouldShowAd)}.bind(this));this.$1.addListener("commercialBreak/CTAClicked",this.$21.bind(this))};a.prototype.$21=function(){"use strict";this.$14=!0};a.prototype.$22=function(a){__p&&__p();var c;a.setLogEntryPropertyGetters((c={},c[b("VideoPlayerLoggerEventField").HOST_VIDEO_ID]=this.$8.hostVideoID,c[b("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_INDEX]=this.$12,c));a.addListener("stateChange",function(){!this.$4?this.$23():this.$4.isState(b("VideoPlayerStates").FINISHED)&&this.$23()}.bind(this));a.addListener("playRequested",function(a){a===b("VideoPlayerReason").USER&&this.$2.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_PLAY_AD)}.bind(this));a.addListener("pauseRequested",function(a){this.$2.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_PAUSE_AD,{video_player_reason:a})}.bind(this));this.$2.registerInstreamVideo(a);this.$24();this.$25();this.$26()};a.prototype.$27=function(){"use strict";__p&&__p();var a=null,c=this.$2.getCurrentInstreamVideoAdType();switch(c){case b("InstreamVideoAdType").LIVE:this.$3.getIsDuplicateLiveVideo()?a=b("CommercialBreakNoAdReason").DUPLICATE_VIDEO:!this.$10?a=b("CommercialBreakNoAdReason").WAIT_FOR_FAILED:!this.$11?a=b("CommercialBreakNoAdReason").NO_VIDEO_AD:a=b("CommercialBreakNoAdReason").PLAYBACK_ERROR;this.$2.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_STATIC_COUNTDOWN,{commercial_break_no_ad_reason:a});break;case b("InstreamVideoAdType").VOD:case b("InstreamVideoAdType").NONLIVE:a=b("CommercialBreakNoAdReason").PLAYBACK_ERROR;this.$2.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_SHOW_NOTHING,{commercial_break_no_ad_reason:a});this.$3.reset();break}};a.prototype.$23=function(){"use strict";this.$8.isBroadcast&&this.$16(),this.$3.leaveAdBreak()};a.prototype.$19=function(){"use strict";this.$9=!1,this.$17(),this.$4?this.$22(this.$4):this.$27()};a.prototype.$17=function(){"use strict";this.$4=b("InstreamVideoAdsController").findVideoControllerForStory(this.$7),this.$4&&!this.$4.hasOption("CommercialBreakVideoAdOverlay","videoController")&&this.$4.registerOption("CommercialBreakVideoAdOverlay","videoController",function(){return this.$1}.bind(this)),this.$4&&!this.$4.hasOption("VideoContextMenu","disablePauseMenuItem")&&this.$4.registerOption("VideoContextMenu","disablePauseMenuItem",function(){return this.$8.isLive||!this.$8.canPauseAdBreak}.bind(this))};a.prototype.$18=function(){"use strict";var a=b("DOMDimensions").getElementDimensions(this.$1.getRootNode());this.$1.isFullscreen()&&(a=b("DOMDimensions").getElementDimensions(b("getFullScreenElement")()));return a};a.prototype.$24=function(){"use strict";var a=this.$4;if(!a)return;var b=this.$18();(!b.width||!b.height)&&this.$13&&(b=this.$13);a.setDimensions(b.width,b.height)};a.prototype.$25=function(){"use strict";var a=this.$4;if(!a)return;var b=this.$1.getSource();b&&a.updateSource(b)};a.prototype.$28=function(){"use strict";this.$2.shouldPlayInstreamAd()&&(b("CSS").removeClass(this.$7,"_50m2"),this.$8.isBroadcast||this.$1.emit("commercialBreak/hideUFI"),this.$2.playInstreamAd())};a.prototype.$20=function(a){"use strict";a?(this.$17(),this.$24(),this.$4&&b("CSS").removeClass(this.$7,"_50m2")):this.$16()};a.prototype.$26=function(){"use strict";__p&&__p();if(this.$9)return;this.$9=!0;this.$5=new(b("SubscriptionsHandler"))();this.$5.addSubscriptions(this.$1.addListener("VideoChannelController/enterChannel",this.$29.bind(this)),b("Arbiter").subscribe("VideoChannelView/closed",this.$29.bind(this)),this.$1.addListener("TahoeController/exitTahoe",this.$29.bind(this)),this.$1.addListener("TahoeController/enterTahoe",this.$29.bind(this)),this.$1.addListener("toggleFullscreen",function(){this.$24(),this.$4&&this.$4.logEvent(this.$4.isFullscreen()?b("VideoPlayerLoggerEvent").ENTERED_FS:b("VideoPlayerLoggerEvent").EXITED_FS)}.bind(this)),this.$1.addListener("WatchAndScroll/positionUpdated",this.$24.bind(this)),this.$1.addListener("commercialBreak/scrollAway",function(){this.$4&&this.$4.isState(b("VideoPlayerStates").PLAYING)&&(this.$4.pause(b("VideoPlayerReason").AUTOPLAY),this.$1.once("commercialBreak/scrollInto",function(){this.$9&&this.$4&&this.$4.isState(b("VideoPlayerStates").PAUSED)&&this.$4.play(b("VideoPlayerReason").AUTOPLAY)}.bind(this)))}.bind(this)),this.$1.addListener("commercialBreak/scrollInto",function(){this.$9&&this.$4&&this.$4.isState(b("VideoPlayerStates").READY)&&this.$28()}.bind(this)),b("Event").listen(window,"focus",this.$30.bind(this)));this.$28()};a.prototype.$30=function(){"use strict";this.$14&&b("gkx")("AT66Z79NswpYFsO2HRr4G1bTG5VJVqTPW01ZncfhaP9KYk7xRjZpH31DhXmSLmHqwAl8I-jzWVNqbJuSv73dKTUSC2M6ufJ3-1EqUthLG94bOQ")&&this.$3.endCommercialBreakByCTAClick()};a.prototype.$29=function(){"use strict";this.$24(),this.$25()};a.prototype.$16=function(){"use strict";__p&&__p();if(!this.$9)return;this.$9=!1;this.$10=!1;this.$11=!1;this.$12=0;this.$2.setCurrentInstreamVideoAdBreakVideoID(null);this.$14=!1;b("CSS").addClass(this.$7,"_50m2");this.$4&&this.$4.isState(b("VideoPlayerStates").PLAYING)&&this.$4.pause(b("VideoPlayerReason").AUTOPLAY);this.$5.release();this.$4&&this.$4.destroy();this.$4=null;while(this.$7.children.length>0)b("DOM").remove(this.$7.children[0])};e.exports=a}),null);
__d("InstreamNFXHideType",[],(function(a,b,c,d,e,f){e.exports={HIDE_AD:"HIDE_AD",HIDE_AD_BREAKS:"HIDE_AD_BREAKS"}}),null);
__d("StoryComponentVideoPlayerControllerRegistry",["CommercialBreakHostStoryComponentType","DOMQuery","EventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))(),h=new Map(),i=new Map(),j=new Map();function k(a){a=a;var b=[];while(a)b.unshift(a),a=a.parentElement;return b}function l(a,b){__p&&__p();if(a===null)return null;var c=k(a);a=null;var d=null;b.forEach(function(b){var e=b[0];b=b[1];e=k(e);for(var f=0;f<c.length;++f)if(c[f]!==e[f]){(d===null||f>d)&&(d=f,a=b);break}});return a}a={registerVideoPlayerController:function(a,c){var d=a.getVideoID(),e=h.get(d);e?e.push(a):(e=[a],h.set(d,e));d=null;c===b("CommercialBreakHostStoryComponentType").POP_OVER_MENU?d=this.findPopoverAsyncMenuForVideoPlayerController(a):c===b("CommercialBreakHostStoryComponentType").HOST_STORY_HEADER&&(d=this.findHostStoryControllerForVideoPlayerController(a));if(!d)return;g.emit(d.getInstanceID()+"/register",a)},registerHostStoryController:function(a,b,c){var d=j.get(b);d?d.push(a):(d=[a],j.set(b,d));this.findVideoControllerForStoryController(a,b,c)},registerPopoverAsyncMenu:function(a,b){var c=b.host_video_id;if(!c)return;a=new m(a,b);b=a.getInstanceID();var d=i.get(c);d||(d=[],i.set(c,d));d.push(a);this._informStoryComponentRegister(a.getTriggerElem(),b,c,a.registerVideoPlayerController.bind(a))},_informStoryComponentRegister:function(a,b,c,d){g.addListener(b+"/register",d);d=this.findVideoPlayerControllerForElement(a,c);if(!d)return;g.emit(b+"/register",d)},findVideoPlayerControllerForElement:function(a,b){b=h.get(b);return!b?null:l(a,b.filter(function(a){return!a.isState("destroyed")&&!a.isState("fallback")}).map(function(a){return[a.getRootNode(),a]}))},findPopoverAsyncMenuForVideoPlayerController:function(a){var b=i.get(a.getVideoID());return!b?null:l(a.getRootNode(),b.map(function(a){return[a.getTriggerElem(),a]}))},findHostStoryControllerForVideoPlayerController:function(a){var c=j.get(a.getVideoID());if(!c)return null;for(var d=0;d<c.length;d++){var e=c[d];if(b("DOMQuery").contains(e.getContainerElement(),a.getRootNode()))return e}return null},findVideoControllerForStoryController:function(a,c,d){__p&&__p();g.addListener(a.getInstanceID()+"/register",d);d=h.get(c);if(!d)return;d=d.filter(function(a){return!a.isState("destroyed")&&!a.isState("fallback")});for(var c=0;c<d.length;c++){var e=d[c];if(b("DOMQuery").contains(a.getContainerElement(),e.getRootNode())){g.emit(a.getInstanceID()+"/register",e);return}}}};function m(a,b){this._menu=a,this._originalEndpoint=this._menu._endpoint,this._additionalData=b}m.prototype.registerVideoPlayerController=function(a){a.addListener("commercialBreak/updateOptionMenuURI",function(a){this._updateEndpoint(a)}.bind(this)),a.addListener("commercialBreak/recoverOptionMenuURI",function(){return this._updateEndpoint(this._originalEndpoint)}.bind(this))};m.prototype._updateEndpoint=function(a){var b=this._menu;b.setMenu(b._loadingMenu);b._setFocus(b._loadingMenu);b._endpoint=a;b._fetched&&(b._fetched=!1,b.fetchMenu())};m.prototype.getInstanceID=function(){return this._menu._instanceId.toString()};m.prototype.getTriggerElem=function(){return this._menu.getTriggerElem()};m.prototype.getOptionsButtonID=function(){return this._additionalData.options_button_id||""};e.exports=a}),null);
__d("CountdownTimer.react",["fbt","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;var i=1e3,j=3600,k=j*24*i;function l(a){if(a<10)return"0"+a;else return a.toString()}function m(a,b){var c=0;while(c<a.length&&b(a[c]))c+=1;return a.slice(c)}function n(a){a=m(a,function(a){return a===0});if(a.length===0)return"0";else{for(var b=1;b<a.length;b+=1)a[b]=l(a[b]);return a.join(":")}}var o={HUMAN:"human",DIGITAL:"digital"};d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){return Math.max(this.props.endTime-Date.now(),0)}.bind(this),this.$2=function(){var a=this.$1();this.setState({remainingTime:a});a<=0&&(clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}.bind(this),this.formatTime=function(a,b,c){if(this.props.format==o.DIGITAL)return n([a,b,c]);else if(this.props.format==o.HUMAN)return g._({"*":{"*":{"*":"{hours}h {mins}m {seconds}s"}}},[g._param("hours",a,[0]),g._param("mins",b,[0]),g._param("seconds",c,[0])]);else throw new Error("Unknown format: "+this.props.format)}.bind(this),this.state={remainingTime:this.$1()},b}a.prototype.componentDidMount=function(){"use strict";this.$2(),this.interval=setInterval(this.$2,i)};a.prototype.componentWillUnmount=function(){"use strict";clearInterval(this.interval)};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.remainingTime;if(a>=k){var c=Math.floor(a/k);return b("React").createElement("span",null,c===1?g._("1 day"):g._({"*":"{number} days"},[g._param("number",c,[0])]))}else{c=Math.ceil(a/i);a=Math.floor(c/j);c=new Date(c%j*i);var d=c.getUTCMinutes();c=c.getSeconds();return b("React").createElement("span",null,this.formatTime(a,d,c))}};a.propTypes={endTime:c.number.isRequired,format:c.oneOf([o.HUMAN,o.DIGITAL]).isRequired,onComplete:c.func};e.exports=a}),null);
__d("InstreamPlacement",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRE_ROLL:"pre_roll",MID_ROLL:"mid_roll",POST_ROLL:"post_roll",NON_INTERRUPTIVE:"non_interruptive"})}),null);
__d("VideoCommercialBreakTransitionOverlay",["cx","fbt","CenteredContainer.react","CommercialBreakState","CountdownTimer.react","CSS","InstreamPlacement","React","ReactDOM","SubscriptionsHandler","XUISpinner.react","XUIText.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=300,j=300;function a(a){"use strict";this.$9=null,this.$10=null,this.$1=a.root,this.$2=a.body,this.$7=new(b("SubscriptionsHandler"))()}a.prototype.enable=function(a){"use strict";this.$4=a,this.$5=a.addListener("optionsChange",function(){return this.$11()}.bind(this)),this.$11()};a.prototype.disable=function(){"use strict";this.$5.remove()};a.prototype.$11=function(){"use strict";__p&&__p();this.$3=this.$4.getOption("VideoWithCommercialBreak","controller");if(!this.$3)return;var a=this.$4.getOption("VideoWithInstreamVideo","controller");if(!a)return;this.$6=a.getConfig();this.$5.remove();this.$7.engage();this.$7.addSubscriptions(this.$3.addListener("commercialBreak/stateChange",function(a){var b=a.state,c=a.countdownDurationMsecs;a=a.instreamPlacement;this.$12(b,c,a)}.bind(this)));this.$4.addListener("VideoChannelController/exitChannel",this.$13.bind(this));this.$4.addListener("stateChange",this.$13.bind(this))};a.prototype.$12=function(a,c,d){"use strict";__p&&__p();this.$8=a;switch(a){case b("CommercialBreakState").PREPARE:this.$14(d);break;case b("CommercialBreakState").ENTERING_TRANSITION:this.$15(d);break;case b("CommercialBreakState").PLAY_AD:this.$16(c,d);break;case b("CommercialBreakState").LEAVING_TRANSITION:this.$17();break;case b("CommercialBreakState").INIT:this.$18();break}this.$13(d)};a.prototype.$14=function(a){"use strict";!this.$6.isBroadcast&&a===b("InstreamPlacement").PRE_ROLL&&(b("CSS").addClass(this.$2,"_1p58"),b("ReactDOM").render(b("React").createElement(b("XUISpinner.react"),{className:"_179h",size:"large",background:"dark"}),this.$2));return};a.prototype.$15=function(a){"use strict";this.$6.isBroadcast?(this.$19(h._("will be back soon"),null),this.$4.emit("commercialBreak/hideUFI")):this.$20(a)};a.prototype.$20=function(a){"use strict";if(!this.$6.beginningNonLiveTransitionTimeMs)return;this.$21();var c=Math.max(i,this.$6.beginningNonLiveTransitionTimeMs-i);a===b("InstreamPlacement").PRE_ROLL&&b("ReactDOM").render(b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,vertical:!0},b("React").createElement(b("XUIText.react"),{size:"header3",color:"white",display:"block"},h._("Video will begin after an ad"))),this.$2);b("CSS").addClass(this.$2,"_hax");this.$9=setTimeout(function(){clearTimeout(this.$9),this.$3.emit("commercialBreak/inTransition",{shouldShowAd:!0}),b("CSS").addClass(this.$2,"_hay")}.bind(this),c)};a.prototype.$17=function(){"use strict";this.$6.isBroadcast?this.$19(h._("is returning now"),null):this.$22()};a.prototype.$22=function(){"use strict";if(!this.$6.endingNonLiveTransitionTimeMs)return;this.$21();b("CSS").addClass(this.$2,"_hax");this.$10=setTimeout(function(){clearTimeout(this.$10),this.$3.emit("commercialBreak/inTransition",{shouldShowAd:!1}),b("CSS").addClass(this.$2,"_hay")}.bind(this),j)};a.prototype.$21=function(){"use strict";b("CSS").removeClass(this.$2,"_hax"),b("CSS").removeClass(this.$2,"_hay"),b("CSS").removeClass(this.$2,"_1p58"),b("ReactDOM").unmountComponentAtNode(this.$2)};a.prototype.$16=function(a,c){"use strict";this.$6.isBroadcast&&(a?this.$19(h._("will return in"),a):this.$19(h._("will be back soon"),null)),c===b("InstreamPlacement").PRE_ROLL&&b("ReactDOM").unmountComponentAtNode(this.$2)};a.prototype.$19=function(a,c){"use strict";b("ReactDOM").unmountComponentAtNode(this.$2);var d=null;c&&(d=b("React").createElement("div",{className:"_4fih"},b("React").createElement(b("CountdownTimer.react"),{endTime:Date.now()+c,format:"digital"})));b("ReactDOM").render(b("React").createElement("div",null,b("React").createElement("div",{className:"_4fid"},a),d),this.$2)};a.prototype.$18=function(){"use strict";b("ReactDOM").unmountComponentAtNode(this.$2),this.$4.emit("commercialBreak/showUFI"),clearTimeout(this.$9),clearTimeout(this.$10)};a.prototype.$23=function(){"use strict";return this.$4?this.$4.getVideoNodeNullable():null};a.prototype.$24=function(){"use strict";b("CSS").addClass(this.$1,"_4fii");var a=this.$23();a&&b("CSS").removeClass(a,"_1_d3")};a.prototype.$25=function(){"use strict";b("CSS").removeClass(this.$1,"_4fii");var a=this.$23();this.$6.isBroadcast&&a&&b("CSS").addClass(a,"_1_d3")};a.prototype.$13=function(a){"use strict";__p&&__p();switch(this.$8){case b("CommercialBreakState").PREPARE:a===b("InstreamPlacement").PRE_ROLL&&this.$25();break;case b("CommercialBreakState").ENTERING_TRANSITION:case b("CommercialBreakState").LEAVING_TRANSITION:this.$25();break;case b("CommercialBreakState").PLAY_AD:this.$6.isBroadcast?this.$25():this.$24();break;case b("CommercialBreakState").AD_REQUEST_SENT:break;default:this.$24()}};e.exports=a}),null);
__d("AdBreakToastEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FETCH_AD:"fetch_ad",FETCH_AD_SUCCEED:"fetch_ad_succeed",FETCH_AD_FAIL:"fetch_ad_fail",IMPRESSION_LOGGING:"impression_logging",VIEWER_TABLE_LOGGING:"viewer_table_logging"})}),null);
__d("PreRollStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INIT:"init",PLAYBACK_FINISHED:"playback_finished",FETCH_TIMEOUT:"fetch_timeout",FETCH_FAIL:"fetch_fail",FETCH_NOTHING:"fetch_nothing",SKIPPED:"skipped"})}),null);
__d("SkywalkerCommandType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INTENT:"intent",START:"start"})}),null);
__d("XInstreamVideoDemoStoryAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/instream_demo/view/story/async/",{instream_video_type:{type:"Enum",required:!0,enumType:1},instream_video_break_index:{type:"Int",required:!0},show_short_ad:{type:"Bool",defaultValue:!1},instream_placement:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XInstreamVideoSponsoredStoryAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/instream_video/view/story/async/",{host_video_id:{type:"FBID",required:!0},instream_video_type:{type:"Enum",required:!0,enumType:1},instream_video_break_index:{type:"Int",required:!0},player_origin:{type:"String"},player_sub_origin:{type:"String"},script_path:{type:"String"},video_channel_caller:{type:"Enum",enumType:1},is_sponsored_host_video:{type:"Bool",defaultValue:!1},referrer:{type:"String"},option_menu_button_id:{type:"String"},host_video_stall_count:{type:"Int"},ad_break_duration_ms:{type:"Int"},player_format:{type:"String"},instream_placement:{type:"Enum",required:!0,enumType:1},story_identifier:{type:"String"}})}),null);
__d("hasAdblock",["Promise","AdsAdBlockConfig","URI","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=void 0;function h(){__p&&__p();var a=document.createElement("div");a.className="AdBox Ad advert";document.body.appendChild(a);return new(b("Promise"))(function(b){__p&&__p();var c=window.getComputedStyle&&window.getComputedStyle(a);if(!c){b(!1);return}if(c.display==="none"){b(!0);return}if(c.MozBinding&&c.MozBinding.indexOf("url")===0){setTimeout(function(){return b(a.clientWidth===0)},5e3);return}b(!1)})}function i(){__p&&__p();var a=document.createElement("img");document.body.appendChild(a);return new(b("Promise"))(function(c){a.onload=function(){var b=window.getComputedStyle&&window.getComputedStyle(a);b=b&&b.display==="none";a.parentNode&&a.parentNode.removeChild(a);c(b)};a.onerror=function(){a.parentNode&&a.parentNode.removeChild(a),c(!0)};var d=new(b("URI"))("https://scontent.xx.fbcdn.net/hads-ak-prn2/1487645_6012475414660_1439393861_n.png");a.src=d.toString()})}function a(a){g===undefined?b("promiseDone")(b("Promise").all([h()].concat(b("AdsAdBlockConfig").shouldCheckImage?[i()]:[])),function(b){g=b.some(function(a){return a}),a(g)}):a(g)}e.exports=a}),null);
__d("VideoWithCommercialBreak",["cx","invariant","AdBreakToastEvent","AsyncRequest","BanzaiODS","Base64","CommercialBreakExperiments","CommercialBreakHostStoryComponentType","CommercialBreakMobileEvent","CommercialBreakState","CommercialBreakUtil","CSS","DataStore","DateConsts","EntstreamFeedObjectFollowup","EventEmitter","InstreamNFXHideType","InstreamPlacement","PreRollStatus","QE2Logger","ScriptPath","SkywalkerCommandType","StoryComponentVideoPlayerControllerRegistry","SubscriptionsHandler","VideoPlayerLoggerSource","VideoPlayerOrigins","VideoPlayerReason","VideoPlayerStates","ViewportTrackingHelper","Visibility","XInstreamVideoDemoStoryAsyncController","XInstreamVideoSponsoredStoryAsyncController","gkx","hasAdblock","uniqueID"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=Object.freeze({SHORT_AD_COUNTDOWN_MS:3e3}),k=Object.freeze({NONE:"none",PLAYBACK_FINISHED:"playback_finished",CUT_OFF:"cut_off",HIDE_AD:"hide_ad",HIDE_AD_BREAKS:"hide_ad_breaks",CALL_TO_ACTION_BUTTON_CLICKS:"call_to_action_button_clicks"}),l=Object.freeze({NORMAL:"normal",STALL_STREAM:"stall_stream",STREAM_DRY_OUT:"stream_dry_out"});c=babelHelpers.inherits(a,b("EventEmitter"));i=c&&c.prototype;function a(a){"use strict";i.constructor.call(this),this.$VideoWithCommercialBreak5=b("CommercialBreakState").INIT,this.$VideoWithCommercialBreak10=new(b("SubscriptionsHandler"))(),this.$VideoWithCommercialBreak11=null,this.$VideoWithCommercialBreak17=!1,this.$VideoWithCommercialBreak20=0,this.$VideoWithCommercialBreak16=null,this.$VideoWithCommercialBreak24=b("uniqueID")(),this.$VideoWithCommercialBreak26=-1,this.$VideoWithCommercialBreak14=!1,this.$VideoWithCommercialBreak28=a.preRollAdBreak,this.$VideoWithCommercialBreak29=a.preRollConfig,this.$VideoWithCommercialBreak30=null,this.$VideoWithCommercialBreak29&&this.$VideoWithCommercialBreak29.preRollEnabled&&(this.$VideoWithCommercialBreak30=b("PreRollStatus").INIT),b("hasAdblock")(function(a){this.$VideoWithCommercialBreak19=a}.bind(this))}a.prototype.enable=function(a){"use strict";this.$VideoWithCommercialBreak1=a,this.$VideoWithCommercialBreak2=a.addListener("optionsChange",function(){return this.$VideoWithCommercialBreak31()}.bind(this)),this.$VideoWithCommercialBreak31()};a.prototype.disable=function(){"use strict";this.$VideoWithCommercialBreak2.remove(),this.$VideoWithCommercialBreak1.unregisterOption("VideoWithCommercialBreak","enabled"),this.$VideoWithCommercialBreak1.unregisterOption("VideoWithCommercialBreak","controller"),this.$VideoWithCommercialBreak1.unregisterOption("VideoWithCommercialBreak","isInstreamPausedByNFX"),this.$VideoWithCommercialBreak30=null};a.prototype.shouldPlayPreRollAds=function(a){"use strict";__p&&__p();if(a!==b("VideoPlayerReason").USER)return!1;a=this.$VideoWithCommercialBreak29;if(!a)return!1;if(!this.$VideoWithCommercialBreak28)return!1;if(!this.$VideoWithCommercialBreak32())return!1;b("QE2Logger").logExposureForUser(a.preRollQEName);if(!this.$VideoWithCommercialBreak30)return!1;if(this.$VideoWithCommercialBreak30!=b("PreRollStatus").INIT)return!1;var c=this.$VideoWithCommercialBreak1,d=c.getPlayerOrigin();c=b("CommercialBreakUtil").getVideoPlayerSubOrigin(c);var e=a.videoHomeWatchlistEnabled&&d===b("VideoPlayerOrigins").VIDEO_HOME&&c==="watchlist",f=a.serpEnabled&&d===b("VideoPlayerOrigins").SEARCH,g=a.pageTabHomeEnabled&&d===b("VideoPlayerOrigins").PAGE_TIMELINE&&c==="page_tab_home";d=a.pageTabEpisodeEnabled&&d===b("VideoPlayerOrigins").PAGE_TIMELINE&&c==="page_tab_episodes";if(e||f||g||d){if(b("gkx")("AT5fkgqE-RJq_6TRJYrMbasVENaJaATn1LgqC6AwDplo5S--Di5AcRZbxXENuw0vn8Yvk6k-2h9nHTmJrSJc73WtJFHxZ6dv9sMFK6JKVHqegICzL41nzju5NhpE1nihrU4"))return!0;c=this.$VideoWithCommercialBreak4.startTimestampSec*b("DateConsts").MS_PER_SEC;e=this.$VideoWithCommercialBreak4.videoPlayableDurationInMs;if(c&&e){f=e-c;if(c>a.maxVideoPlaybackTimeMs){this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_PRE_ROLL_BLOCKED_BY_RESUME_TIME,{video_resume_time_in_ms:c,video_play_time_left_in_ms:f});return!1}else if(f>a.minVideoTimeLeftMs){this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_PRE_ROLL_BLOCKED_BY_REMAINING_TIME,{video_resume_time_in_ms:c,video_play_time_left_in_ms:f});return!1}}return!0}return!1};a.prototype.schedulePreRollAds=function(){"use strict";var a=this.$VideoWithCommercialBreak28;a||h(0);this.onIntentCommand(a.getIndex(),a.getInstreamPlacement(),a.getAdBreakDurationInMs())};a.prototype.$VideoWithCommercialBreak32=function(){"use strict";var a=this.$VideoWithCommercialBreak1,c=a.getPlayerOrigin();a=b("CommercialBreakUtil").getVideoPlayerSubOrigin(a);return c===b("VideoPlayerOrigins").VIDEO_HOME&&a==="watchlist"||c===b("VideoPlayerOrigins").PAGE_TIMELINE&&a==="page_tab_home"||c===b("VideoPlayerOrigins").PAGE_TIMELINE&&a==="page_tab_episodes"||c===b("VideoPlayerOrigins").SEARCH?!0:!1};a.prototype.$VideoWithCommercialBreak31=function(){"use strict";__p&&__p();this.$VideoWithCommercialBreak9=this.$VideoWithCommercialBreak1.getOption("VideoWithInstreamVideo","controller");if(!this.$VideoWithCommercialBreak9)return;this.$VideoWithCommercialBreak2.remove();this.$VideoWithCommercialBreak4=this.$VideoWithCommercialBreak9.getConfig();this.$VideoWithCommercialBreak4.isComposerPreviewing||(b("CommercialBreakExperiments").instreamAdsNFXOnContextCard&&b("StoryComponentVideoPlayerControllerRegistry").registerVideoPlayerController(this.$VideoWithCommercialBreak1,b("CommercialBreakHostStoryComponentType").POP_OVER_MENU),b("CommercialBreakExperiments").instreamAdsEnableGreyHostStory&&b("StoryComponentVideoPlayerControllerRegistry").registerVideoPlayerController(this.$VideoWithCommercialBreak1,b("CommercialBreakHostStoryComponentType").HOST_STORY_HEADER));this.reset();this.$VideoWithCommercialBreak1.registerOption("VideoWithCommercialBreak","enabled",function(){return!0});this.$VideoWithCommercialBreak1.registerOption("VideoWithCommercialBreak","controller",function(){return this}.bind(this));this.$VideoWithCommercialBreak1.registerOption("VideoWithCommercialBreak","isInstreamPausedByNFX",this.$VideoWithCommercialBreak33.bind(this))};a.prototype.$VideoWithCommercialBreak34=function(){"use strict";return this.$VideoWithCommercialBreak4.isLive&&this.$VideoWithCommercialBreak21==="false"&&this.$VideoWithCommercialBreak11===null};a.prototype.$VideoWithCommercialBreak35=function(a){__p&&__p();var c=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(a===this.$VideoWithCommercialBreak5)return;if(a===b("CommercialBreakState").ENTERING_TRANSITION&&this.$VideoWithCommercialBreak34()){this.reset();return}c.state=a;Object.prototype.hasOwnProperty.call(c,"instreamPlacement")||(c.instreamPlacement=this.$VideoWithCommercialBreak9.getCurrentInstreamPlacement());a===b("CommercialBreakState").INIT?(this.$VideoWithCommercialBreak9.resetInstreamVideo(),this.$VideoWithCommercialBreak10.release(),this.$VideoWithCommercialBreak10.engage(),this.$VideoWithCommercialBreak11=null,this.$VideoWithCommercialBreak22=null,this.$VideoWithCommercialBreak23=null,this.$VideoWithCommercialBreak25=null,this.$VideoWithCommercialBreak26=-1):(a===b("CommercialBreakState").ENTERING_TRANSITION||a===b("CommercialBreakState").PLAY_AD||a===b("CommercialBreakState").LEAVING_TRANSITION)&&this.$VideoWithCommercialBreak9.registerInstreamVideo(null);this.$VideoWithCommercialBreak5=a;this.emit("commercialBreak/stateChange",c)};a.prototype.setStoryIdentifier=function(a){"use strict";this.$VideoWithCommercialBreak27=a};a.prototype.getChevronButtonID=function(){"use strict";return this.$VideoWithCommercialBreak24};a.prototype.getInstreamVideoOptionMenuURI=function(){"use strict";return this.$VideoWithCommercialBreak16};a.prototype.getIsCommercialBreakOngoing=function(){"use strict";return this.$VideoWithCommercialBreak5===b("CommercialBreakState").ENTERING_TRANSITION&&this.$VideoWithCommercialBreak4.isBroadcast||this.$VideoWithCommercialBreak5===b("CommercialBreakState").PLAY_AD||this.$VideoWithCommercialBreak5===b("CommercialBreakState").LEAVING_TRANSITION};a.prototype.getIsDuringTransition=function(){"use strict";return this.$VideoWithCommercialBreak5===b("CommercialBreakState").ENTERING_TRANSITION||this.$VideoWithCommercialBreak5===b("CommercialBreakState").LEAVING_TRANSITION};a.prototype.reset=function(){"use strict";this.$VideoWithCommercialBreak35(b("CommercialBreakState").INIT),this.$VideoWithCommercialBreak6=0,this.$VideoWithCommercialBreak20=0,this.$VideoWithCommercialBreak7=-1,this.$VideoWithCommercialBreak8=-1,this.$VideoWithCommercialBreak15=null,this.$VideoWithCommercialBreak17=!1,this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(null),this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakVideoID(null),this.$VideoWithCommercialBreak9.setCurrentInstreamPlacement(null),this.$VideoWithCommercialBreak16=null};a.prototype.logAndEndCommercialBreak=function(a){"use strict";this.$VideoWithCommercialBreak15=a||null,this.$VideoWithCommercialBreak36(),this.reset()};a.prototype.endCommercialBreakByCTAClick=function(){"use strict";this.logAndEndCommercialBreak(k.CALL_TO_ACTION_BUTTON_CLICKS)};a.prototype.setIsDuplicateLiveVideo=function(a){"use strict";this.$VideoWithCommercialBreak14=a};a.prototype.getIsDuplicateLiveVideo=function(){"use strict";return this.$VideoWithCommercialBreak14};a.prototype.onIntentCommand=function(a,c,d){"use strict";__p&&__p();if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").INIT&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PREPARE&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak35(b("CommercialBreakState").INIT);this.$VideoWithCommercialBreak35(b("CommercialBreakState").PREPARE,{instreamPlacement:c});this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(a);this.$VideoWithCommercialBreak9.setCurrentInstreamPlacement(c);a=this.$VideoWithCommercialBreak37(a,c,d);if(!a)return;d=null;if(c===b("InstreamPlacement").PRE_ROLL){c=this.$VideoWithCommercialBreak29;c||h(0);d=c.maxFetchTimeMs}this.$VideoWithCommercialBreak38(a,d);this.$VideoWithCommercialBreak35(b("CommercialBreakState").AD_REQUEST_SENT)};a.prototype.onLiveIntentCommand=function(a){"use strict";__p&&__p();var c=a.commercial_break_length_ms?parseInt(a.commercial_break_length_ms,10):null,d=Object.prototype.hasOwnProperty.call(a,"index")?parseInt(a.index,10):0;if(a.type===b("SkywalkerCommandType").INTENT){this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").RECEIVE_INTENT_MSG,{topic:this.$VideoWithCommercialBreak4.skywalkerTopic,commercial_break_length_ms:c,ad_break_index:d});a=a.lastScrollAwayTime;if(a&&a>0&&Date.now()-a>this.$VideoWithCommercialBreak4.maxDurationHostVideoOffscreenToFetchMs)return}if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").INIT&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PREPARE&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak35(b("CommercialBreakState").INIT);this.$VideoWithCommercialBreak35(b("CommercialBreakState").PREPARE);this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(d);this.$VideoWithCommercialBreak9.setCurrentInstreamPlacement(b("InstreamPlacement").MID_ROLL);c&&(this.$VideoWithCommercialBreak6=c);if(this.$VideoWithCommercialBreak14)return;a=this.$VideoWithCommercialBreak37(d,b("InstreamPlacement").MID_ROLL,c);if(!a)return;this.$VideoWithCommercialBreak38(a);this.$VideoWithCommercialBreak35(b("CommercialBreakState").AD_REQUEST_SENT)};a.prototype.$VideoWithCommercialBreak39=function(){"use strict";return b("CommercialBreakUtil").getVideoPlayerFormat(this.$VideoWithCommercialBreak1)};a.prototype.$VideoWithCommercialBreak37=function(a,c,d){"use strict";var e=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType();if(!e||!this.$VideoWithCommercialBreak4.hostVideoID&&!this.$VideoWithCommercialBreak4.shouldShowDemoAd){b("BanzaiODS").bumpEntityKey("instreamads","missing_query_params");return null}var f=this.$VideoWithCommercialBreak1.getSource()===b("VideoPlayerLoggerSource").PERMALINK?document.referrer:null;return{host_video_id:this.$VideoWithCommercialBreak4.hostVideoID,instream_video_type:e,instream_video_break_index:a,player_origin:this.$VideoWithCommercialBreak1.getPlayerOrigin(),script_path:b("ScriptPath").getScriptPath(),player_sub_origin:b("CommercialBreakUtil").getVideoPlayerSubOrigin(this.$VideoWithCommercialBreak1),is_sponsored_host_video:this.$VideoWithCommercialBreak4.isSponsored,video_channel_caller:this.$VideoWithCommercialBreak4.videoChannelCaller,host_video_stall_count:this.$VideoWithCommercialBreak1.getStallCount(),ad_break_duration_ms:d,referrer:f,option_menu_button_id:b("CommercialBreakExperiments").instreamAdsNFXOnContextCard?this.getChevronButtonID():"",should_show_demo_ad:this.$VideoWithCommercialBreak4.shouldShowDemoAd,should_show_short_demo_ad:this.$VideoWithCommercialBreak4.shouldShowShortDemoAd,player_format:this.$VideoWithCommercialBreak39(),instream_placement:c,story_identifier:this.$VideoWithCommercialBreak27?b("Base64").encode(this.$VideoWithCommercialBreak27):null}};a.prototype.$VideoWithCommercialBreak38=function(a,c){"use strict";__p&&__p();var d=null;if(a.should_show_demo_ad){var e=b("XInstreamVideoDemoStoryAsyncController").getURIBuilder().setEnum("instream_video_type",a.instream_video_type).setInt("instream_video_break_index",a.instream_video_break_index).setBool("show_short_ad",a.should_show_short_demo_ad).setEnum("instream_placement",a.instream_placement);d=new(b("AsyncRequest"))(e.getURI()).setMethod("GET").setReadOnly(!0).setHandler(function(a){this.$VideoWithCommercialBreak40(a.getPayload())}.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak41.bind(this))}else if(b("CommercialBreakExperiments").instreamAdsFetchFromFeedEndpoint&&this.$VideoWithCommercialBreak19){e="/ajax/pagelet/generic.php/LitestandTailLoadPagelet";d=new(b("AsyncRequest"))(e).setMethod("GET").setReadOnly(!0).setData({data:b("Base64").encode(JSON.stringify(a))}).setHandler(this.$VideoWithCommercialBreak42.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak41.bind(this))}else{e=b("XInstreamVideoSponsoredStoryAsyncController").getURIBuilder().setFBID("host_video_id",a.host_video_id).setEnum("instream_video_type",a.instream_video_type).setInt("instream_video_break_index",a.instream_video_break_index).setEnum("video_channel_caller",a.video_channel_caller).setBool("is_sponsored_host_video",a.is_sponsored_host_video).setInt("host_video_stall_count",a.host_video_stall_count).setInt("ad_break_duration_ms",a.ad_break_duration_ms).setString("player_origin",a.player_origin).setString("player_sub_origin",a.player_sub_origin).setString("script_path",a.script_path).setString("referrer",a.referrer).setString("option_menu_button_id",a.option_menu_button_id).setString("player_format",a.player_format).setEnum("instream_placement",a.instream_placement).setString("story_identifier",a.story_identifier);d=new(b("AsyncRequest"))(e.getURI()).setMethod("GET").setReadOnly(!0).setHandler(function(a){this.$VideoWithCommercialBreak40(a.getPayload())}.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak41.bind(this))}c&&(d&&d.setTimeoutHandler(c,this.$VideoWithCommercialBreak43.bind(this)));d&&d.send();this.$VideoWithCommercialBreak1.emit("commercialBreak/toast",b("AdBreakToastEvent").FETCH_AD);this.$VideoWithCommercialBreak26=Date.now()};a.prototype.$VideoWithCommercialBreak42=function(a){"use strict";this.$VideoWithCommercialBreak40(JSON.parse(b("Base64").decode(a.getPayload())))};a.prototype.$VideoWithCommercialBreak43=function(a){"use strict";this.$VideoWithCommercialBreak9.getCurrentInstreamPlacement()===b("InstreamPlacement").PRE_ROLL&&(this.$VideoWithCommercialBreak44(b("PreRollStatus").FETCH_TIMEOUT),this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_PRE_ROLL_FETCH_SUCCESS_LATE),this.reset());return};a.prototype.$VideoWithCommercialBreak41=function(){"use strict";b("hasAdblock")(function(a){this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").VIDEO_FETCH_FAILURE,{is_ad_block_enabled:a})}.bind(this)),this.$VideoWithCommercialBreak9.getCurrentInstreamPlacement()===b("InstreamPlacement").PRE_ROLL&&(this.$VideoWithCommercialBreak44(b("PreRollStatus").FETCH_FAIL),this.reset()),this.$VideoWithCommercialBreak1.emit("commercialBreak/toast",b("AdBreakToastEvent").FETCH_AD_FAIL)};a.prototype.$VideoWithCommercialBreak40=function(a){"use strict";__p&&__p();if(!this.$VideoWithCommercialBreak4.isBroadcast&&this.$VideoWithCommercialBreak5===b("CommercialBreakState").ENTERING_TRANSITION)return;if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").AD_REQUEST_SENT&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").CB_SCHEDULED&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").ENTERING_TRANSITION)return;var c=a.isEmpty,d=a.instreamVideoAdBreakIndex,e=a.instreamVideoAdType,f=a.instreamPlacement,g=a.videoAdStory,i=a.instreamVideoAdBreakVideoID,j=a.instreamVideoOptionMenuURI;if(g){this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").VIDEO_FETCH_SUCCESS,{is_empty:c,commercial_break_ad_client_token:a.instreamVideoAdBreakClientToken,client_side_ads_query_consumed_time_in_ms:this.$VideoWithCommercialBreak26>0?Date.now()-this.$VideoWithCommercialBreak26:null});var k=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType(),l=this.$VideoWithCommercialBreak9.getCurrentInstreamPlacement();e===k&&f===l||h(0);this.$VideoWithCommercialBreak11=c?null:d;e=c?null:i;this.$VideoWithCommercialBreak22=a.callToAction;this.$VideoWithCommercialBreak23=a.contextCardTrackingWrapper;this.$VideoWithCommercialBreak25=a.infoCardNuxID;this.emit("commercialBreak/videoAdStoryFetched",g,c,d,e,a.instreamVideoAdBreakClientToken);c||this.emit("commercialBreak/runFraudDetector",a.instreamAdImpressionIdentifier);this.$VideoWithCommercialBreak1.emit("commercialBreak/toast",b("AdBreakToastEvent").FETCH_AD_SUCCEED,{isEmpty:c,disabledReason:a.disabledReason});b("CommercialBreakExperiments").instreamAdsNFXOnContextCard&&!c&&(this.$VideoWithCommercialBreak16=j);l===b("InstreamPlacement").PRE_ROLL&&(!c?this.$VideoWithCommercialBreak45(d,f):(this.$VideoWithCommercialBreak44(b("PreRollStatus").FETCH_NOTHING),this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_SHOW_NOTHING,{instream_placement:b("InstreamPlacement").PRE_ROLL}),this.reset()))}else this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").VIDEO_FETCH_FAILURE)};a.prototype.$VideoWithCommercialBreak45=function(a,c){"use strict";if(b("Visibility").isHidden()){this.$VideoWithCommercialBreak44(b("PreRollStatus").SKIPPED);this.reset();return}this.onStartCommand(a,c,0)};a.prototype.$VideoWithCommercialBreak44=function(a){"use strict";this.$VideoWithCommercialBreak30=a;a=this.$VideoWithCommercialBreak1;if(!a.isState("destroyed")&&!a.isState("fallback")){var c=b("ViewportTrackingHelper").isVisible(a.getRootNode(),0);c&&a.play(b("VideoPlayerReason").USER)}};a.prototype.getCallToAction=function(){"use strict";return this.$VideoWithCommercialBreak22};a.prototype.getContextCardTrackingWrapper=function(){"use strict";return this.$VideoWithCommercialBreak23};a.prototype.getInfoCardNuxID=function(){"use strict";return this.$VideoWithCommercialBreak25};a.prototype.onStartCommand=function(a,c,d){"use strict";__p&&__p();this.$VideoWithCommercialBreak7=d;if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").INIT&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PREPARE&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(a);this.$VideoWithCommercialBreak9.setCurrentInstreamPlacement(c);this.$VideoWithCommercialBreak5===b("CommercialBreakState").INIT&&this.onIntentCommand(a,c,this.$VideoWithCommercialBreak4.commercialBreakLengthMs);this.$VideoWithCommercialBreak35(b("CommercialBreakState").CB_SCHEDULED);this.$VideoWithCommercialBreak3=this.$VideoWithCommercialBreak1.addListener("updateStatus",function(){return this.$VideoWithCommercialBreak46()}.bind(this));this.$VideoWithCommercialBreak46()};a.prototype.onLiveStartCommand=function(a){"use strict";__p&&__p();var c=parseInt(a.commercial_break_start_time_ms,10);this.$VideoWithCommercialBreak7=c;var d=this.$VideoWithCommercialBreak47();this.$VideoWithCommercialBreak8=d;this.$VideoWithCommercialBreak21=Object.prototype.hasOwnProperty.call(a,"commercial_break_drop_live_stream")?a.commercial_break_drop_live_stream:null;var e=Object.prototype.hasOwnProperty.call(a,"index")?parseInt(a.index,10):0;this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").RECEIVE_START_MSG,{topic:this.$VideoWithCommercialBreak4.skywalkerTopic,commercial_break_start_time_ms:c,ad_break_index:e});if(c<d-this.$VideoWithCommercialBreak4.allowedStartTimeDeltaMs){this.$VideoWithCommercialBreak5!==b("CommercialBreakState").INIT&&b("BanzaiODS").bumpEntityKey("instreamads","receive_start_after_break");return}if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").INIT&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PREPARE&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(e);this.$VideoWithCommercialBreak9.setCurrentInstreamPlacement(b("InstreamPlacement").MID_ROLL);if(this.$VideoWithCommercialBreak5===b("CommercialBreakState").INIT){c=a.commercial_break_length_ms?parseInt(a.commercial_break_length_ms,10):null;this.$VideoWithCommercialBreak6=c?c:this.$VideoWithCommercialBreak4.commercialBreakLengthMs;this.onLiveIntentCommand(a)}this.$VideoWithCommercialBreak35(b("CommercialBreakState").CB_SCHEDULED);this.$VideoWithCommercialBreak10.addSubscriptions(this.$VideoWithCommercialBreak1.addListener("streamInterrupted",this.$VideoWithCommercialBreak46.bind(this,!0)));this.$VideoWithCommercialBreak3=this.$VideoWithCommercialBreak1.addListener("updateStatus",function(){return this.$VideoWithCommercialBreak46()}.bind(this));this.$VideoWithCommercialBreak46()};a.prototype.$VideoWithCommercialBreak46=function(){__p&&__p();var a=arguments.length<=0||arguments[0]===undefined?!1:arguments[0];if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").CB_SCHEDULED){this.$VideoWithCommercialBreak3.remove();return}var c=this.$VideoWithCommercialBreak47(),d=this.$VideoWithCommercialBreak7-c,e=d>0&&d<=this.$VideoWithCommercialBreak4.startFromStreamDryDeltaMs&&this.$VideoWithCommercialBreak1.isBuffering()&&this.$VideoWithCommercialBreak1.isState(b("VideoPlayerStates").PLAYING);if(!this.$VideoWithCommercialBreak4.isLive||Math.abs(d)<=this.$VideoWithCommercialBreak4.allowedStartTimeDeltaMs||e||a){this.$VideoWithCommercialBreak3.remove();var f=l.NORMAL;e?f=l.STALL_STREAM:a&&(f=l.STREAM_DRY_OUT);var g=this.$VideoWithCommercialBreak7-this.$VideoWithCommercialBreak8;this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START,{timestamp_delta_ms:parseInt(d,10),timestamp_latency_ms:parseInt(g,10),playback_trigger_event:f,viewer_count:this.$VideoWithCommercialBreak48()});this.$VideoWithCommercialBreak35(b("CommercialBreakState").ENTERING_TRANSITION);this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT);var h=this.$VideoWithCommercialBreak4.isBroadcast?this.$VideoWithCommercialBreak4.beginningTransitionTimeMs:this.$VideoWithCommercialBreak4.beginningNonLiveTransitionTimeMs;setTimeout(this.$VideoWithCommercialBreak49.bind(this),h)}else c>this.$VideoWithCommercialBreak7&&(this.$VideoWithCommercialBreak3.remove(),this.reset())};a.prototype.$VideoWithCommercialBreak49=function(){"use strict";__p&&__p();if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").CB_SCHEDULED&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").ENTERING_TRANSITION&&this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PLAY_AD)return;if(!this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak35(b("CommercialBreakState").PLAY_AD,{countdownDurationMsecs:0});return}var a=this.$VideoWithCommercialBreak6-this.$VideoWithCommercialBreak4.beginningTransitionTimeMs,c=a-this.$VideoWithCommercialBreak4.endingTransitionTimeMs;this.$VideoWithCommercialBreak20=c;this.$VideoWithCommercialBreak35(b("CommercialBreakState").PLAY_AD,{countdownDurationMsecs:this.$VideoWithCommercialBreak4.isLive?c:0});this.$VideoWithCommercialBreak12=!0;setTimeout(function(){this.$VideoWithCommercialBreak12=!1}.bind(this),c-j.SHORT_AD_COUNTDOWN_MS);setTimeout(this.$VideoWithCommercialBreak50.bind(this),c);this.$VideoWithCommercialBreak13=!1;setTimeout(this.$VideoWithCommercialBreak51.bind(this),a);setTimeout(this.$VideoWithCommercialBreak52.bind(this),a+this.$VideoWithCommercialBreak4.maxOverduePlayingTimeMs)};a.prototype.leaveAdBreak=function(){"use strict";__p&&__p();var a=this.$VideoWithCommercialBreak33();if(!this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak15=a?this.$VideoWithCommercialBreak18==b("InstreamNFXHideType").HIDE_AD_BREAKS?k.HIDE_AD_BREAKS:k.HIDE_AD:k.PLAYBACK_FINISHED;this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak35(b("CommercialBreakState").LEAVING_TRANSITION);var c=this.$VideoWithCommercialBreak4.isBroadcast?this.$VideoWithCommercialBreak4.endingTransitionTimeMs:this.$VideoWithCommercialBreak4.endingNonLiveTransitionTimeMs;setTimeout(function(){this.$VideoWithCommercialBreak53()}.bind(this),c);return}this.$VideoWithCommercialBreak5===b("CommercialBreakState").PLAY_AD&&(!this.$VideoWithCommercialBreak9.getIsAdActive()?(this.$VideoWithCommercialBreak15=k.NONE,this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT),this.$VideoWithCommercialBreak35(b("CommercialBreakState").LEAVING_TRANSITION)):((this.$VideoWithCommercialBreak9.isState(b("VideoPlayerStates").FINISHED)||this.$VideoWithCommercialBreak9.isState(b("VideoPlayerStates").DESTROYED))&&!this.$VideoWithCommercialBreak12||a)&&(this.$VideoWithCommercialBreak15=a?k.HIDE_AD:k.PLAYBACK_FINISHED,this.$VideoWithCommercialBreak13?(this.$VideoWithCommercialBreak36(),this.reset()):(this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT),this.$VideoWithCommercialBreak35(b("CommercialBreakState").LEAVING_TRANSITION))))};a.prototype.$VideoWithCommercialBreak53=function(){"use strict";this.$VideoWithCommercialBreak9.getCurrentInstreamPlacement()===b("InstreamPlacement").PRE_ROLL&&this.$VideoWithCommercialBreak44(b("PreRollStatus").PLAYBACK_FINISHED),this.$VideoWithCommercialBreak36(),this.reset()};a.prototype.$VideoWithCommercialBreak51=function(){"use strict";this.$VideoWithCommercialBreak5===b("CommercialBreakState").LEAVING_TRANSITION?(this.$VideoWithCommercialBreak36(),this.reset()):this.$VideoWithCommercialBreak5===b("CommercialBreakState").PLAY_AD&&(this.$VideoWithCommercialBreak13=!0)};a.prototype.$VideoWithCommercialBreak52=function(){"use strict";if(this.$VideoWithCommercialBreak33())return;this.$VideoWithCommercialBreak5===b("CommercialBreakState").PLAY_AD&&(this.$VideoWithCommercialBreak15=k.CUT_OFF,this.$VideoWithCommercialBreak36(),this.reset())};a.prototype.$VideoWithCommercialBreak50=function(){"use strict";if(this.$VideoWithCommercialBreak33())return;this.leaveAdBreak()};a.prototype.$VideoWithCommercialBreak36=function(){"use strict";this.$VideoWithCommercialBreak9.getIsVisibleForAutoplay()&&this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_END,{ending_reason:this.$VideoWithCommercialBreak15})};a.prototype.$VideoWithCommercialBreak47=function(){"use strict";var a=this.$VideoWithCommercialBreak1.getCurrentTimePosition()*b("DateConsts").MS_PER_SEC;return a};a.prototype.$VideoWithCommercialBreak48=function(){"use strict";if(!this.$VideoWithCommercialBreak4.isLive)return null;var a=this.$VideoWithCommercialBreak1.getOption("VideoWithLiveBroadcast","viewCount");a=a&&JSON.parse(b("DataStore").get(a,"store",null));return a?a.viewerCount:null};a.prototype.$VideoWithCommercialBreak33=function(){"use strict";var a=this.$VideoWithCommercialBreak9.getAdController();return a&&a.isState(b("VideoPlayerStates").PAUSED)&&this.$VideoWithCommercialBreak5===b("CommercialBreakState").PLAY_AD&&this.$VideoWithCommercialBreak17};a.prototype.startBreakWithNoVideoAd=function(a,c,d){"use strict";this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(d),this.$VideoWithCommercialBreak9.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_SHOW_NOTHING,{commercial_break_no_ad_reason:a}),this.reset()};a.prototype.hasReceivedAdStory=function(a){"use strict";return a===this.$VideoWithCommercialBreak11};a.prototype.onPauseAdFromNFX=function(){"use strict";if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PLAY_AD)return;this.$VideoWithCommercialBreak17=!0;b("EntstreamFeedObjectFollowup").addInstreamAdsFollowup(this.$VideoWithCommercialBreak1.getRootNode());var a=this.$VideoWithCommercialBreak9.getAdController();a&&(a.pause(b("VideoPlayerReason").USER),b("CSS").addClass(a.getVideoNode(),"_1_d3"),b("CSS").addClass(a.getRootNode(),"_4ap-"))};a.prototype.onPlayAdFromNFX=function(){"use strict";if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PLAY_AD)return;var a=this.$VideoWithCommercialBreak9.getAdController();a&&(this.$VideoWithCommercialBreak17=!1,b("CSS").removeClass(a.getVideoNode(),"_1_d3"),b("CSS").removeClass(a.getRootNode(),"_4ap-"),this.$VideoWithCommercialBreak9.play(b("VideoPlayerReason").USER))};a.prototype.onLeaveAdFromNFX=function(a){"use strict";if(this.$VideoWithCommercialBreak5!==b("CommercialBreakState").PLAY_AD)return;this.$VideoWithCommercialBreak18=a;this.leaveAdBreak();this.$VideoWithCommercialBreak17=!1;this.$VideoWithCommercialBreak18=null};a.prototype.getLiveCountdownDurationMs=function(){"use strict";return this.$VideoWithCommercialBreak20};e.exports=a}),null);
__d("VideoWithInstreamVideo",["BanzaiODS","CommercialBreakMobileEvent","CommercialBreakShouldLogMarauderEvent","CommercialBreakUtil","DateConsts","EventEmitter","InstreamVideoAdType","MarauderLogger","SubscriptionsHandler","VideoPlayerLoggerEventField","VideoPlayerReason","VideoPlayerStates","onViewportChanged"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this),this.$VideoWithInstreamVideo4=a}a.prototype.enable=function(a){"use strict";__p&&__p();if(this.$VideoWithInstreamVideo2)return;this.$VideoWithInstreamVideo2=a;this.$VideoWithInstreamVideo3=a;this.$VideoWithInstreamVideo13=!1;this.$VideoWithInstreamVideo14=this.getIsVisibleForAutoplay();b("onViewportChanged")(this.$VideoWithInstreamVideo18.bind(this));this.$VideoWithInstreamVideo1=new(b("SubscriptionsHandler"))();this.$VideoWithInstreamVideo1.engage();this.$VideoWithInstreamVideo15=[];this.$VideoWithInstreamVideo19();this.$VideoWithInstreamVideo2.registerOption("VideoWithInstreamVideo","enabled",function(){return!0});this.$VideoWithInstreamVideo2.registerOption("VideoWithInstreamVideo","controller",function(){return this}.bind(this))};a.prototype.disable=function(){"use strict"};a.prototype.$VideoWithInstreamVideo20=function(){"use strict";var a=["play","pause","mute","unmute","constructor","destroy","addListener","isMuted","isState","updateSource"],b=this.$VideoWithInstreamVideo2.constructor.prototype,c=Object.getOwnPropertyNames(b).filter(function(c){var d=b[c];return typeof d==="function"&&a.indexOf(c)<0});return c};a.prototype.$VideoWithInstreamVideo19=function(){"use strict";var a=this.$VideoWithInstreamVideo20(),b=function(a){this.constructor.prototype[a]=function(){return this.$VideoWithInstreamVideo2[a].apply(this.$VideoWithInstreamVideo2,arguments)}};a.forEach(b,this)};a.prototype.$VideoWithInstreamVideo21=function(){"use strict";var a=this.$VideoWithInstreamVideo20();a.forEach(function(a){return delete this.constructor.prototype[a]}.bind(this))};a.prototype.$VideoWithInstreamVideo22=function(){var a;(a=g.emit).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)))};a.prototype.emit=function(){var a;(a=this.$VideoWithInstreamVideo2).emit.apply(a,arguments)};a.prototype.$VideoWithInstreamVideo23=function(event){"use strict";if(this.$VideoWithInstreamVideo15.indexOf(event)<0){this.$VideoWithInstreamVideo15.push(event);var a=function(event){return this.$VideoWithInstreamVideo22.bind(this,event)}.bind(this);this.$VideoWithInstreamVideo1.addSubscriptions(this.$VideoWithInstreamVideo2.addListener(event,a(event)))}};a.prototype.addListener=function(event){var a;this.$VideoWithInstreamVideo23(event);return(a=g.addListener).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)))};a.prototype.registerInstreamVideo=function(a){"use strict";__p&&__p();this.$VideoWithInstreamVideo13||(this.$VideoWithInstreamVideo13=!0,this.$VideoWithInstreamVideo2.instreamVideoStart());if(this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2){this.$VideoWithInstreamVideo9=this.$VideoWithInstreamVideo2.isState(b("VideoPlayerStates").PLAYING);this.$VideoWithInstreamVideo11=this.$VideoWithInstreamVideo2.isMuted();this.$VideoWithInstreamVideo12=this.$VideoWithInstreamVideo2.getVolume();var c=this.getCurrentInstreamVideoAdType();if(c===b("InstreamVideoAdType").LIVE)this.$VideoWithInstreamVideo2.mute();else if(c===b("InstreamVideoAdType").VOD||c===b("InstreamVideoAdType").NONLIVE){this.$VideoWithInstreamVideo2.setLogEntryPropertyGetters((c={},c[b("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_INDEX]=this.$VideoWithInstreamVideo5,c[b("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_VIDEO_ID]=this.$VideoWithInstreamVideo7?this.$VideoWithInstreamVideo7:-1,c));this.$VideoWithInstreamVideo2.pause(b("VideoPlayerReason").COMMERCIAL_BREAK)}}this.$VideoWithInstreamVideo3=a};a.prototype.resetInstreamVideo=function(){"use strict";this.$VideoWithInstreamVideo2.removeLogEntryPropertyGetters([b("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_INDEX,b("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_VIDEO_ID]);if(this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2){var a=this.getCurrentInstreamVideoAdType();a===b("InstreamVideoAdType").LIVE&&!this.$VideoWithInstreamVideo11&&this.$VideoWithInstreamVideo2.isMuted()?this.$VideoWithInstreamVideo2.unmute():(a===b("InstreamVideoAdType").VOD||a===b("InstreamVideoAdType").NONLIVE)&&this.$VideoWithInstreamVideo9&&!this.$VideoWithInstreamVideo2.isState(b("VideoPlayerStates").PLAYING)&&this.$VideoWithInstreamVideo2.play(b("VideoPlayerReason").COMMERCIAL_BREAK)}this.$VideoWithInstreamVideo3=this.$VideoWithInstreamVideo2;this.$VideoWithInstreamVideo13=!1;this.$VideoWithInstreamVideo2.instreamVideoEnd()};a.prototype.shouldPlayInstreamAd=function(){"use strict";return this.$VideoWithInstreamVideo4.isLive&&!this.$VideoWithInstreamVideo9?!1:this.getIsVisibleForAutoplay()};a.prototype.playInstreamAd=function(){"use strict";__p&&__p();if(!this.$VideoWithInstreamVideo3||this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2){b("BanzaiODS").bumpEntityKey("instreamads","missing_ad_player");return}var a=this.$VideoWithInstreamVideo3;this.logMarauderEvent(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_AD);a.once("beginPlayback",function(){this.$VideoWithInstreamVideo16={adClientToken:a.getAdClientToken(),adStartPlayingTimeMs:Date.now(),adPositionInVideoMs:this.$VideoWithInstreamVideo2.getCurrentTimePosition()*b("DateConsts").MS_PER_SEC,playerOrigin:this.$VideoWithInstreamVideo2.getPlayerOrigin(),playerSubOrigin:b("CommercialBreakUtil").getVideoPlayerSubOrigin(this.$VideoWithInstreamVideo2),playerFormat:b("CommercialBreakUtil").getVideoPlayerFormat(this.$VideoWithInstreamVideo2)}}.bind(this));this.$VideoWithInstreamVideo11?a.mute():(a.unmute(),a.setVolume(this.$VideoWithInstreamVideo12));this.$VideoWithInstreamVideo10=!1;a.play(b("VideoPlayerReason").AUTOPLAY)};a.prototype.play=function(a){var c=this;this.$VideoWithInstreamVideo9=!0;this.$VideoWithInstreamVideo3&&(this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2||this.$VideoWithInstreamVideo3.isState(b("VideoPlayerStates").PAUSED)||this.$VideoWithInstreamVideo3.isState(b("VideoPlayerStates").PLAYING))&&(function(){var b=c.$VideoWithInstreamVideo3;c.$VideoWithInstreamVideo2.getOption("VideoWithCommercialBreak","isInstreamPausedByNFX")||(c.$VideoWithInstreamVideo10&&b!==c.$VideoWithInstreamVideo2?b.once("pausePlayback",function(){return b.play(a)}):b.play(a))})();this.$VideoWithInstreamVideo4.isLive&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2&&this.$VideoWithInstreamVideo2.play(a)};a.prototype.pause=function(a){"use strict";__p&&__p();if(a===b("VideoPlayerReason").USER&&this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2&&this.$VideoWithInstreamVideo2.getOption("VideoWithInstreamVideo","disableClickToPause"))return;this.$VideoWithInstreamVideo9=!1;if(this.$VideoWithInstreamVideo3&&(this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2||this.$VideoWithInstreamVideo3.isState(b("VideoPlayerStates").PLAYING))){var c=this.$VideoWithInstreamVideo3;c!==this.$VideoWithInstreamVideo2&&(this.$VideoWithInstreamVideo10=!0,c.once("pausePlayback",function(){return this.$VideoWithInstreamVideo10=!1}.bind(this)));c.pause(a)}this.$VideoWithInstreamVideo4.isLive&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2&&this.$VideoWithInstreamVideo2.pause(a)};a.prototype.mute=function(){"use strict";this.$VideoWithInstreamVideo11=!0,this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3.mute()};a.prototype.unmute=function(){"use strict";this.$VideoWithInstreamVideo11=!1,this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3.unmute()};a.prototype.isMuted=function(){"use strict";return this.$VideoWithInstreamVideo3?this.$VideoWithInstreamVideo3.isMuted():this.$VideoWithInstreamVideo2.isMuted()};a.prototype.isState=function(a){"use strict";return this.$VideoWithInstreamVideo3?this.$VideoWithInstreamVideo3.isState(a):this.$VideoWithInstreamVideo2.isState(a)};a.prototype.destroy=function(){"use strict";this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2&&this.$VideoWithInstreamVideo3.destroy(),this.$VideoWithInstreamVideo2.destroy()};a.prototype.updateSource=function(a){"use strict";this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2&&this.$VideoWithInstreamVideo3.updateSource(a),this.$VideoWithInstreamVideo2.updateSource(a)};a.prototype.getConfig=function(){"use strict";return this.$VideoWithInstreamVideo4};a.prototype.setCurrentInstreamVideoAdBreakIndex=function(a){"use strict";this.$VideoWithInstreamVideo5=a};a.prototype.setCurrentInstreamPlacement=function(a){"use strict";this.$VideoWithInstreamVideo6=a};a.prototype.setCurrentInstreamVideoAdBreakVideoID=function(a){"use strict";this.$VideoWithInstreamVideo7=a};a.prototype.setCurrentInstreamVideoAdBreakClientToken=function(a){"use strict";this.$VideoWithInstreamVideo8=a};a.prototype.setThumbnailURLForPreview=function(a){"use strict";this.$VideoWithInstreamVideo17=a};a.prototype.getPreferredThumbnailURI=function(){"use strict";return this.$VideoWithInstreamVideo4.isComposerPreviewing?this.$VideoWithInstreamVideo17:this.$VideoWithInstreamVideo4.preferredThumbnailURI};a.prototype.getCurrentInstreamVideoAdType=function(){"use strict";if(this.$VideoWithInstreamVideo4.isLive)return b("InstreamVideoAdType").LIVE;else if(this.$VideoWithInstreamVideo4.isBroadcast)return b("InstreamVideoAdType").VOD;else return b("InstreamVideoAdType").NONLIVE};a.prototype.getCurrentInstreamPlacement=function(){"use strict";return this.$VideoWithInstreamVideo6};a.prototype.getCurrentInstreamVideoAdBreakVideoID=function(){"use strict";return this.$VideoWithInstreamVideo7};a.prototype.getCurrentInstreamVideoAdBreakIndex=function(){"use strict";return this.$VideoWithInstreamVideo5};a.prototype.getIsAdActive=function(){"use strict";return this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2};a.prototype.getAdController=function(){"use strict";return this.getIsAdActive()?this.$VideoWithInstreamVideo3:null};a.prototype.$VideoWithInstreamVideo18=function(){"use strict";__p&&__p();var a=this.getIsVisibleForAutoplay();if(this.$VideoWithInstreamVideo14!==a){if(this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2){var c=null,d=this.$VideoWithInstreamVideo3;d&&d.getPlaybackDuration()>0&&(c=b("DateConsts").MS_PER_SEC*(d.getPlaybackDuration()-d.getCurrentTimePosition()));this.logMarauderEvent(a?b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_SCROLLED_INTO:b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_SCROLLED_AWAY,{remaining_ad_duration_ms:c})}this.$VideoWithInstreamVideo2.emit(a?"commercialBreak/scrollInto":"commercialBreak/scrollAway")}this.$VideoWithInstreamVideo14=a};a.prototype.getIsVisibleForAutoplay=function(){"use strict";var a=this.$VideoWithInstreamVideo2.getOption("FeedAutoplay","isVisibleForAutoplay");return a||a===undefined};a.prototype.getMostRecentAdInfo=function(){"use strict";return this.$VideoWithInstreamVideo16};a.prototype.logMarauderEvent=function(a){__p&&__p();var c=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!Object.prototype.hasOwnProperty.call(b("CommercialBreakShouldLogMarauderEvent"),a)||!b("CommercialBreakShouldLogMarauderEvent")[a])return;c.host_video_id=this.$VideoWithInstreamVideo4.hostVideoID;c.instream_video_ad_type=this.getCurrentInstreamVideoAdType();Object.prototype.hasOwnProperty.call(c,"ad_break_index")||(c.ad_break_index=this.$VideoWithInstreamVideo5);Object.prototype.hasOwnProperty.call(c,"instream_placement")||(c.instream_placement=this.$VideoWithInstreamVideo6);c.is_sponsored=this.$VideoWithInstreamVideo4.isSponsored;c.is_visible=this.getIsVisibleForAutoplay();c.player_origin=this.$VideoWithInstreamVideo4.playerOrigin;Object.prototype.hasOwnProperty.call(c,"commercial_break_ad_client_token")||(c.commercial_break_ad_client_token=this.$VideoWithInstreamVideo8);b("MarauderLogger").log(a,"commercial_break",c)};e.exports=a}),null);