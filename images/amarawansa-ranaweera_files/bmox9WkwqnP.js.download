if (self.CavalryLogger) { CavalryLogger.start_js(["FN4II"]); }

__d("FeedTagSuggest",["ArbiterMixin","AsyncRequest","CSS","Event","mixin","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a,c,d,e,f,h,i,j,k,l){"use strict";g.constructor.call(this),this.suggest=a,this.$FeedTagSuggest1=i,this.$FeedTagSuggest2=j,this.$FeedTagSuggest3=k,this.$FeedTagSuggest4=c,this.$FeedTagSuggest5=h,this.$FeedTagSuggest6=f,this.$FeedTagSuggest7=d,this.$FeedTagSuggest8=e,this.$FeedTagSuggest9=l,this.$FeedTagSuggest10=new(b("SubscriptionsHandler"))(),this.$FeedTagSuggest10.addSubscriptions(b("Event").listen(this.$FeedTagSuggest5,"click",this.dismissSuggestion.bind(this,"no")),b("Event").listen(this.$FeedTagSuggest6,"click",this.acceptTagSuggestion.bind(this))),this.$FeedTagSuggest4&&this.$FeedTagSuggest10.addSubscriptions(b("Event").listen(this.$FeedTagSuggest4,"click",this.dismissSuggestion.bind(this,"close")))}a.prototype.dismissSuggestion=function(a){"use strict";var c=this.$FeedTagSuggest9.feed_type;new(b("AsyncRequest"))().setURI("/ajax/dismiss_tag_suggest.php").setMethod("POST").setData({facebox_logs:[{facebox:this.$FeedTagSuggest2,log_data:this.$FeedTagSuggest9}],closing_source:c,closing_action:a}).setAllowCrossPageTransition(!0).send();this.inform("remove")};a.prototype.tagSaveSuccess=function(a){"use strict";this.inform("remove")};a.prototype.acceptTagSuggestion=function(){"use strict";new(b("AsyncRequest"))().setURI("/ajax/photo_feed_tagging_ajax.php").setMethod("POST").setData({photo_id:this.$FeedTagSuggest1,facebox_id:this.$FeedTagSuggest2,subject_id:this.$FeedTagSuggest3,log_data:this.$FeedTagSuggest9}).setErrorHandler(this.dismissSuggestion.bind(this,"err")).setAllowCrossPageTransition(!0).setHandler(this.tagSaveSuccess.bind(this)).send(),this.$FeedTagSuggest8&&(b("CSS").hide(this.$FeedTagSuggest7),b("CSS").show(this.$FeedTagSuggest8))};a.prototype.cleanup=function(){"use strict";this.$FeedTagSuggest10.release()};e.exports=a}),null);
__d("LitestandTagSuggestContainer",["cx","csx","invariant","Animation","CSS","DOM","DOMQuery","Event","JSXDOM","Rect","SubscriptionsHandler","Style"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=15;function a(a,c,d,e){"use strict";__p&&__p();this.$1=new(b("SubscriptionsHandler"))();this.$1.engage();this.$2=a;this.$3=d;this.$4=e;b("CSS").show(this.$2);e=new(b("Rect"))(d).w();d=b("DOMQuery").scry(a,"._5cne");var f=0;for(var g=0;g<d.length;g++){b("CSS").show(d[g]);var h=new(b("Rect"))(d[g].children[0]).w();g>0&&b("CSS").hide(d[g]);h>f&&(f=h)}if(f+j>e){b("CSS").hide(a);return}this.$5=[];this.$6=!1;c.forEach(this.registerSuggestion.bind(this));this.$1.addSubscriptions(b("Event").listen(this.$2,"mouseenter",this.$7.bind(this)),b("Event").listen(this.$2,"mouseleave",this.$8.bind(this)))}a.prototype.registerSuggestion=function(a){"use strict";this.$5.push(a);a=a.js_instance;this.$1.addSubscriptions(a.subscribe("remove",this.onRemove.bind(this,a)))};a.prototype.$9=function(a){"use strict";if(!this.$10){var c=this.$3.children[0];this.$11={top:parseInt(b("Style").get(c,"top"),10)||0,left:parseInt(b("Style").get(c,"left"),10)||0,inner_h:parseInt(b("Style").get(c,"height"),10),inner_w:parseInt(b("Style").get(c,"width"),10),outer_h:parseInt(b("Style").get(this.$3,"height"),10),outer_w:parseInt(b("Style").get(this.$3,"width"),10)}}c=this.$11;var d=100*(a.top*c.inner_h/100+c.top)/c.outer_h,e=100*(a.left*c.inner_w/100+c.left)/c.outer_w,f=a.width*c.inner_w/c.outer_w;a=a.height*c.inner_h/c.outer_h;return b("JSXDOM").div({className:"_5cnc hidden_elem",style:{top:d+"%",left:e+"%",width:f+"%",height:a+"%"}})};a.prototype.onRemove=function(a){"use strict";var c=this.$5.shift();this.$8();c.js_instance===a||i(0);this.$5.length===0?(new(b("Animation"))(this.$2).ondone(function(){this.removeSingleSuggest(this.$2)}.bind(this)).from("opacity",1).to("opacity",0).ease(b("Animation").ease.end).duration(500).go(),this.cleanup()):new(b("Animation"))(a.suggest).ondone(function(){this.switchToNextSuggest(a.suggest,this.getNextFacebox().suggest)}.bind(this)).from("opacity",1).to("opacity",0).ease(b("Animation").ease.end).duration(500).go()};a.prototype.switchToNextSuggest=function(a,c){"use strict";b("CSS").show(c),new(b("Animation"))(c).ondone(this.removeSingleSuggest.bind(this,a)).from("opacity",0).to("opacity",1).ease(b("Animation").ease.end).duration(500).go()};a.prototype.removeSingleSuggest=function(a){"use strict";b("DOM").remove(a),a.cleanup()};a.prototype.getNextFacebox=function(){"use strict";return this.$5[0].js_instance};a.prototype.$7=function(){"use strict";this.$6||(this.$6=!0,this.$5.forEach(function(a,c,d){a=this.$9(a.position_data);b("DOM").appendContent(this.$3,a);d[c].dom_element=a}.bind(this))),this.$12=this.$5[0].dom_element,b("CSS").show(this.$12)};a.prototype.$8=function(){"use strict";this.$12&&b("CSS").hide(this.$12),this.$12=null};a.prototype.cleanup=function(){"use strict";this.$1.release()};e.exports=a}),null);